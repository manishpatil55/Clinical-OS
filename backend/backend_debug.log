2025-12-23 17:17:00,961 - INFO - select pg_catalog.version()
2025-12-23 17:17:00,961 - INFO - [raw sql] {}
2025-12-23 17:17:00,977 - INFO - select current_schema()
2025-12-23 17:17:00,977 - INFO - [raw sql] {}
2025-12-23 17:17:00,979 - INFO - show standard_conforming_strings
2025-12-23 17:17:00,979 - INFO - [raw sql] {}
2025-12-23 17:17:00,985 - INFO - BEGIN (implicit)
2025-12-23 17:17:00,987 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:00,987 - INFO - [generated in 0.00010s] {'table_name': 'tenants', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:00,990 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:00,990 - INFO - [cached since 0.003052s ago] {'table_name': 'tenant_settings', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:00,990 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:00,990 - INFO - [cached since 0.003439s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:00,990 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:00,990 - INFO - [cached since 0.003827s ago] {'table_name': 'patients', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:00,991 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:00,991 - INFO - [cached since 0.004158s ago] {'table_name': 'clinical_records', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:00,991 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:00,991 - INFO - [cached since 0.004455s ago] {'table_name': 'appointments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:00,992 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:00,992 - INFO - [cached since 0.005024s ago] {'table_name': 'attachments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:00,992 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:00,992 - INFO - [cached since 0.005265s ago] {'table_name': 'prescriptions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:00,992 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:00,992 - INFO - [cached since 0.005487s ago] {'table_name': 'invoices', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:00,992 - INFO - COMMIT
2025-12-23 17:17:09,117 - INFO - select pg_catalog.version()
2025-12-23 17:17:09,117 - INFO - [raw sql] {}
2025-12-23 17:17:09,118 - INFO - select current_schema()
2025-12-23 17:17:09,119 - INFO - [raw sql] {}
2025-12-23 17:17:09,119 - INFO - show standard_conforming_strings
2025-12-23 17:17:09,119 - INFO - [raw sql] {}
2025-12-23 17:17:09,121 - INFO - BEGIN (implicit)
2025-12-23 17:17:09,122 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:09,123 - INFO - [generated in 0.00010s] {'table_name': 'tenants', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:09,126 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:09,128 - INFO - [cached since 0.00563s ago] {'table_name': 'tenant_settings', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:09,129 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:09,129 - INFO - [cached since 0.006571s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:09,130 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:09,130 - INFO - [cached since 0.007285s ago] {'table_name': 'patients', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:09,131 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:09,131 - INFO - [cached since 0.008115s ago] {'table_name': 'clinical_records', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:09,131 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:09,131 - INFO - [cached since 0.0087s ago] {'table_name': 'appointments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:09,132 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:09,132 - INFO - [cached since 0.01006s ago] {'table_name': 'attachments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:09,133 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:09,133 - INFO - [cached since 0.01044s ago] {'table_name': 'prescriptions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:09,133 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:09,133 - INFO - [cached since 0.01082s ago] {'table_name': 'invoices', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:09,134 - INFO - COMMIT
2025-12-23 17:17:33,087 - INFO - select pg_catalog.version()
2025-12-23 17:17:33,087 - INFO - [raw sql] {}
2025-12-23 17:17:33,088 - INFO - select current_schema()
2025-12-23 17:17:33,088 - INFO - [raw sql] {}
2025-12-23 17:17:33,088 - INFO - show standard_conforming_strings
2025-12-23 17:17:33,088 - INFO - [raw sql] {}
2025-12-23 17:17:33,090 - INFO - BEGIN (implicit)
2025-12-23 17:17:33,092 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:33,092 - INFO - [generated in 0.00011s] {'table_name': 'tenants', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:33,093 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:33,093 - INFO - [cached since 0.001304s ago] {'table_name': 'tenant_settings', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:33,093 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:33,093 - INFO - [cached since 0.001658s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:33,094 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:33,094 - INFO - [cached since 0.002055s ago] {'table_name': 'patients', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:33,094 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:33,094 - INFO - [cached since 0.002391s ago] {'table_name': 'clinical_records', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:33,095 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:33,095 - INFO - [cached since 0.003039s ago] {'table_name': 'appointments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:33,095 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:33,096 - INFO - [cached since 0.00376s ago] {'table_name': 'attachments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:33,096 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:33,096 - INFO - [cached since 0.004344s ago] {'table_name': 'prescriptions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:33,096 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:17:33,096 - INFO - [cached since 0.004655s ago] {'table_name': 'invoices', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:17:33,097 - INFO - COMMIT
2025-12-23 17:18:19,689 - INFO - select pg_catalog.version()
2025-12-23 17:18:19,689 - INFO - [raw sql] {}
2025-12-23 17:18:19,690 - INFO - select current_schema()
2025-12-23 17:18:19,690 - INFO - [raw sql] {}
2025-12-23 17:18:19,691 - INFO - show standard_conforming_strings
2025-12-23 17:18:19,691 - INFO - [raw sql] {}
2025-12-23 17:18:19,695 - INFO - BEGIN (implicit)
2025-12-23 17:18:19,699 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:19,699 - INFO - [generated in 0.00014s] {'table_name': 'tenants', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:19,700 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:19,700 - INFO - [cached since 0.001477s ago] {'table_name': 'tenant_settings', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:19,701 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:19,701 - INFO - [cached since 0.00189s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:19,701 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:19,701 - INFO - [cached since 0.002253s ago] {'table_name': 'patients', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:19,701 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:19,701 - INFO - [cached since 0.002582s ago] {'table_name': 'clinical_records', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:19,702 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:19,702 - INFO - [cached since 0.002889s ago] {'table_name': 'appointments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:19,702 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:19,702 - INFO - [cached since 0.003285s ago] {'table_name': 'attachments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:19,702 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:19,702 - INFO - [cached since 0.00353s ago] {'table_name': 'prescriptions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:19,702 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:19,702 - INFO - [cached since 0.003768s ago] {'table_name': 'invoices', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:19,703 - INFO - COMMIT
2025-12-23 17:18:20,968 - INFO - select pg_catalog.version()
2025-12-23 17:18:20,968 - INFO - [raw sql] {}
2025-12-23 17:18:20,970 - INFO - select current_schema()
2025-12-23 17:18:20,970 - INFO - [raw sql] {}
2025-12-23 17:18:20,971 - INFO - show standard_conforming_strings
2025-12-23 17:18:20,971 - INFO - [raw sql] {}
2025-12-23 17:18:20,975 - INFO - BEGIN (implicit)
2025-12-23 17:18:20,982 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:20,982 - INFO - [generated in 0.00020s] {'table_name': 'tenants', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:20,990 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:20,990 - INFO - [cached since 0.007959s ago] {'table_name': 'tenant_settings', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:20,995 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:20,996 - INFO - [cached since 0.01354s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:20,997 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:20,997 - INFO - [cached since 0.01469s ago] {'table_name': 'patients', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:20,998 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:20,998 - INFO - [cached since 0.01569s ago] {'table_name': 'clinical_records', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:20,999 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:20,999 - INFO - [cached since 0.01656s ago] {'table_name': 'appointments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:20,999 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:21,000 - INFO - [cached since 0.01737s ago] {'table_name': 'attachments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:21,000 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:21,000 - INFO - [cached since 0.01803s ago] {'table_name': 'prescriptions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:21,001 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:18:21,001 - INFO - [cached since 0.01894s ago] {'table_name': 'invoices', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:18:21,002 - INFO - COMMIT
2025-12-23 17:18:21,523 - INFO - ROLLBACK
2025-12-23 17:18:21,524 - INFO - COMMIT
2025-12-23 17:18:31,160 - INFO - get_current_user called
2025-12-23 17:18:31,180 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:18:31,189 - INFO - BEGIN (implicit)
2025-12-23 17:18:31,252 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:18:31,252 - INFO - [generated in 0.00038s] {'username_1': 'apollo_admin'}
2025-12-23 17:18:31,257 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:18:31,257 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:18:31,258 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:18:31,258 - INFO - [generated in 0.00008s] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:18:31,260 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:18:31,260 - INFO - ROLLBACK
2025-12-23 17:28:14,952 - INFO - get_current_user called
2025-12-23 17:28:14,978 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:15,014 - INFO - BEGIN (implicit)
2025-12-23 17:28:15,027 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:15,027 - INFO - [cached since 583.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:15,081 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:15,081 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:15,084 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:15,084 - INFO - [cached since 583.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:15,086 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:15,090 - INFO - ROLLBACK
2025-12-23 17:28:15,091 - INFO - get_current_user called
2025-12-23 17:28:15,091 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:15,157 - INFO - BEGIN (implicit)
2025-12-23 17:28:15,157 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:15,157 - INFO - [cached since 583.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:15,162 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:15,162 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:15,163 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:15,163 - INFO - [cached since 583.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:15,163 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:15,164 - INFO - ROLLBACK
2025-12-23 17:28:19,004 - INFO - get_current_user called
2025-12-23 17:28:19,008 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:19,011 - INFO - BEGIN (implicit)
2025-12-23 17:28:19,013 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:19,014 - INFO - [cached since 587.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:19,018 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:19,019 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:19,019 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:19,020 - INFO - [cached since 587.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,021 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:19,022 - INFO - ROLLBACK
2025-12-23 17:28:19,023 - INFO - get_current_user called
2025-12-23 17:28:19,023 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:19,023 - INFO - BEGIN (implicit)
2025-12-23 17:28:19,023 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:19,023 - INFO - [cached since 587.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:19,024 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:19,026 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:19,026 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:19,026 - INFO - [cached since 587.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,027 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:19,027 - INFO - ROLLBACK
2025-12-23 17:28:19,068 - INFO - get_current_user called
2025-12-23 17:28:19,068 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:19,069 - INFO - BEGIN (implicit)
2025-12-23 17:28:19,069 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:19,069 - INFO - [cached since 587.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:19,070 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:19,072 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:19,072 - INFO - [cached since 587.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,092 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:19,092 - INFO - [generated in 0.00023s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,100 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:19,100 - INFO - [generated in 0.00010s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,102 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:28:19,102 - INFO - [generated in 0.00007s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:28:19,107 - INFO - ROLLBACK
2025-12-23 17:28:19,108 - INFO - get_current_user called
2025-12-23 17:28:19,108 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:19,108 - INFO - BEGIN (implicit)
2025-12-23 17:28:19,108 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:19,108 - INFO - [cached since 587.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:19,108 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:19,109 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:19,109 - INFO - [cached since 587.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,109 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:19,109 - INFO - [cached since 0.01764s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,111 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:19,111 - INFO - [cached since 0.01106s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,111 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:28:19,111 - INFO - [cached since 0.009176s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:28:19,114 - INFO - ROLLBACK
2025-12-23 17:28:19,136 - INFO - get_current_user called
2025-12-23 17:28:19,136 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:19,137 - INFO - BEGIN (implicit)
2025-12-23 17:28:19,138 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:19,138 - INFO - [cached since 587.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:19,144 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:19,144 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:19,144 - INFO - [cached since 587.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,146 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:19,146 - INFO - [cached since 0.05442s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,149 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:19,149 - INFO - [cached since 0.04936s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:19,150 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:28:19,150 - INFO - [cached since 0.04794s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:28:19,152 - INFO - ROLLBACK
2025-12-23 17:28:22,848 - INFO - get_current_user called
2025-12-23 17:28:22,853 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:22,857 - INFO - BEGIN (implicit)
2025-12-23 17:28:22,861 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:22,861 - INFO - [cached since 591.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:22,864 - INFO - get_current_user called
2025-12-23 17:28:22,864 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:22,865 - INFO - BEGIN (implicit)
2025-12-23 17:28:22,865 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:22,865 - INFO - [cached since 591.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:22,866 - INFO - get_current_user called
2025-12-23 17:28:22,867 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:22,869 - INFO - get_current_user called
2025-12-23 17:28:22,869 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:22,872 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:22,872 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:22,873 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:22,873 - INFO - [cached since 591.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:22,873 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:22,886 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:28:22,886 - INFO - [generated in 0.00014s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:28:22,887 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:22,889 - INFO - ROLLBACK
2025-12-23 17:28:22,893 - INFO - ROLLBACK
2025-12-23 17:28:22,894 - INFO - get_current_user called
2025-12-23 17:28:22,894 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:22,894 - INFO - BEGIN (implicit)
2025-12-23 17:28:22,895 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:22,895 - INFO - [cached since 591.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:22,895 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:22,896 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:28:22,896 - INFO - [cached since 0.01016s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:28:22,897 - INFO - ROLLBACK
2025-12-23 17:28:22,963 - INFO - BEGIN (implicit)
2025-12-23 17:28:22,963 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:22,963 - INFO - [cached since 591.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:22,963 - INFO - BEGIN (implicit)
2025-12-23 17:28:22,963 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:22,963 - INFO - [cached since 591.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:22,965 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:22,973 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:28:22,973 - INFO - [generated in 0.00014s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:28:22,974 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:22,974 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:22,974 - INFO - [generated in 0.00010s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:22,975 - INFO - ROLLBACK
2025-12-23 17:28:22,979 - INFO - ROLLBACK
2025-12-23 17:28:22,980 - INFO - get_current_user called
2025-12-23 17:28:22,980 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:22,980 - INFO - BEGIN (implicit)
2025-12-23 17:28:22,980 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:22,980 - INFO - [cached since 591.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:22,981 - INFO - get_current_user called
2025-12-23 17:28:22,981 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:22,981 - INFO - BEGIN (implicit)
2025-12-23 17:28:22,981 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:22,981 - INFO - [cached since 591.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:22,982 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:22,982 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:28:22,982 - INFO - [cached since 0.008995s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:28:22,982 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:22,983 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:22,983 - INFO - [cached since 0.008412s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:22,983 - INFO - ROLLBACK
2025-12-23 17:28:22,984 - INFO - ROLLBACK
2025-12-23 17:28:24,182 - INFO - get_current_user called
2025-12-23 17:28:24,183 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:24,184 - INFO - BEGIN (implicit)
2025-12-23 17:28:24,184 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:24,185 - INFO - [cached since 592.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:24,186 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:24,187 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:24,187 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:24,187 - INFO - [cached since 592.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:24,190 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:24,191 - INFO - ROLLBACK
2025-12-23 17:28:24,492 - INFO - get_current_user called
2025-12-23 17:28:24,492 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:24,492 - INFO - BEGIN (implicit)
2025-12-23 17:28:24,493 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:24,493 - INFO - [cached since 593.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:24,494 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:24,495 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:28:24,495 - INFO - [cached since 1.522s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 17:28:24,498 - INFO - ROLLBACK
2025-12-23 17:28:26,005 - INFO - get_current_user called
2025-12-23 17:28:26,006 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:26,007 - INFO - BEGIN (implicit)
2025-12-23 17:28:26,008 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:26,008 - INFO - [cached since 594.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:26,009 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:26,010 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:26,010 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:26,010 - INFO - [cached since 594.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:26,011 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:26,012 - INFO - ROLLBACK
2025-12-23 17:28:27,444 - INFO - get_current_user called
2025-12-23 17:28:27,446 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:27,447 - INFO - BEGIN (implicit)
2025-12-23 17:28:27,448 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:27,449 - INFO - [cached since 596.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:27,453 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:27,453 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:27,454 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:27,455 - INFO - [cached since 596.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:27,456 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:27,458 - INFO - ROLLBACK
2025-12-23 17:28:27,747 - INFO - get_current_user called
2025-12-23 17:28:27,748 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:27,749 - INFO - BEGIN (implicit)
2025-12-23 17:28:27,750 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:27,750 - INFO - [cached since 596.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:27,752 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:27,754 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:28:27,754 - INFO - [cached since 4.781s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 17:28:27,756 - INFO - ROLLBACK
2025-12-23 17:28:30,854 - INFO - get_current_user called
2025-12-23 17:28:30,854 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:30,855 - INFO - BEGIN (implicit)
2025-12-23 17:28:30,855 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:30,856 - INFO - [cached since 599.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:30,857 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:30,857 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:30,857 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:30,857 - INFO - [cached since 599.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:30,861 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:30,862 - INFO - ROLLBACK
2025-12-23 17:28:30,863 - INFO - get_current_user called
2025-12-23 17:28:30,863 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:30,864 - INFO - BEGIN (implicit)
2025-12-23 17:28:30,864 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:30,864 - INFO - [cached since 599.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:30,866 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:30,866 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:30,867 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:30,867 - INFO - [cached since 599.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:30,867 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:30,868 - INFO - ROLLBACK
2025-12-23 17:28:49,629 - INFO - get_current_user called
2025-12-23 17:28:49,630 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:49,635 - INFO - BEGIN (implicit)
2025-12-23 17:28:49,639 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:49,639 - INFO - [cached since 618.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:49,651 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:49,651 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:49,652 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:49,653 - INFO - [cached since 618.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:49,654 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:49,656 - INFO - ROLLBACK
2025-12-23 17:28:49,657 - INFO - get_current_user called
2025-12-23 17:28:49,657 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:49,658 - INFO - BEGIN (implicit)
2025-12-23 17:28:49,658 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:49,658 - INFO - [cached since 618.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:49,661 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:49,661 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:49,661 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:49,661 - INFO - [cached since 618.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:49,665 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:49,666 - INFO - ROLLBACK
2025-12-23 17:28:51,246 - INFO - get_current_user called
2025-12-23 17:28:51,246 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:51,247 - INFO - BEGIN (implicit)
2025-12-23 17:28:51,247 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:51,248 - INFO - [cached since 620s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:51,248 - INFO - get_current_user called
2025-12-23 17:28:51,249 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:51,249 - INFO - BEGIN (implicit)
2025-12-23 17:28:51,249 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:51,249 - INFO - [cached since 620s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:51,251 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:51,251 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:51,251 - INFO - [cached since 620s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,252 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:51,252 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:51,252 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:51,252 - INFO - [cached since 620s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,254 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:51,254 - INFO - [cached since 32.16s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,255 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:51,255 - INFO - ROLLBACK
2025-12-23 17:28:51,256 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:51,256 - INFO - [cached since 32.16s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,258 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:28:51,258 - INFO - [cached since 32.16s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:28:51,260 - INFO - ROLLBACK
2025-12-23 17:28:51,261 - INFO - get_current_user called
2025-12-23 17:28:51,261 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:51,261 - INFO - BEGIN (implicit)
2025-12-23 17:28:51,262 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:51,262 - INFO - [cached since 620s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:51,262 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:51,263 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:51,263 - INFO - [cached since 620s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,263 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:51,263 - INFO - [cached since 32.17s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,264 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:51,264 - INFO - [cached since 32.16s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,265 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:28:51,265 - INFO - [cached since 32.16s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:28:51,266 - INFO - ROLLBACK
2025-12-23 17:28:51,267 - INFO - get_current_user called
2025-12-23 17:28:51,267 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:51,268 - INFO - BEGIN (implicit)
2025-12-23 17:28:51,268 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:51,268 - INFO - [cached since 620s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:51,268 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:51,269 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:51,269 - INFO - [cached since 620s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,270 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:51,270 - INFO - [cached since 32.18s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,271 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:51,271 - INFO - [cached since 32.17s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:51,272 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:28:51,272 - INFO - [cached since 32.17s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:28:51,274 - INFO - ROLLBACK
2025-12-23 17:28:58,925 - INFO - get_current_user called
2025-12-23 17:28:58,926 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:58,927 - INFO - BEGIN (implicit)
2025-12-23 17:28:58,928 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:58,928 - INFO - [cached since 627.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:58,928 - INFO - get_current_user called
2025-12-23 17:28:58,929 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:58,929 - INFO - BEGIN (implicit)
2025-12-23 17:28:58,929 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:58,929 - INFO - [cached since 627.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:58,930 - INFO - get_current_user called
2025-12-23 17:28:58,930 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:58,930 - INFO - BEGIN (implicit)
2025-12-23 17:28:58,930 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:58,930 - INFO - [cached since 627.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:58,931 - INFO - get_current_user called
2025-12-23 17:28:58,931 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:58,931 - INFO - BEGIN (implicit)
2025-12-23 17:28:58,932 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:58,932 - INFO - [cached since 627.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:58,932 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:58,933 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:28:58,933 - INFO - [cached since 36.05s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:28:58,934 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:58,935 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:28:58,935 - INFO - [cached since 35.96s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:28:58,936 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:58,937 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:58,937 - INFO - [cached since 35.96s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:58,937 - INFO - ROLLBACK
2025-12-23 17:28:58,938 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:58,939 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:28:58,939 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:28:58,939 - INFO - [cached since 627.7s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:58,939 - INFO - ROLLBACK
2025-12-23 17:28:58,940 - INFO - get_current_user called
2025-12-23 17:28:58,941 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:58,941 - INFO - ROLLBACK
2025-12-23 17:28:58,942 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:28:58,942 - INFO - get_current_user called
2025-12-23 17:28:58,943 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:58,943 - INFO - BEGIN (implicit)
2025-12-23 17:28:58,943 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:58,943 - INFO - [cached since 627.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:58,944 - INFO - ROLLBACK
2025-12-23 17:28:58,944 - INFO - get_current_user called
2025-12-23 17:28:58,944 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:28:58,945 - INFO - BEGIN (implicit)
2025-12-23 17:28:58,945 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:58,945 - INFO - [cached since 627.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:58,947 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:58,947 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:28:58,947 - INFO - [cached since 35.97s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:28:58,948 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:58,948 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:28:58,948 - INFO - [cached since 35.97s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:28:58,949 - INFO - ROLLBACK
2025-12-23 17:28:58,949 - INFO - ROLLBACK
2025-12-23 17:28:59,014 - INFO - BEGIN (implicit)
2025-12-23 17:28:59,015 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:28:59,015 - INFO - [cached since 627.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:28:59,018 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:28:59,019 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:28:59,020 - INFO - [cached since 36.13s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:28:59,022 - INFO - ROLLBACK
2025-12-23 17:29:02,434 - INFO - get_current_user called
2025-12-23 17:29:02,435 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:02,437 - INFO - BEGIN (implicit)
2025-12-23 17:29:02,438 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:02,438 - INFO - [cached since 631.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:02,440 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:02,440 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:02,441 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:02,441 - INFO - [cached since 631.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:02,443 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:02,443 - INFO - ROLLBACK
2025-12-23 17:29:02,739 - INFO - get_current_user called
2025-12-23 17:29:02,740 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:02,741 - INFO - BEGIN (implicit)
2025-12-23 17:29:02,742 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:02,742 - INFO - [cached since 631.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:02,744 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:02,745 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:29:02,745 - INFO - [cached since 39.77s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 17:29:02,747 - INFO - ROLLBACK
2025-12-23 17:29:04,205 - INFO - get_current_user called
2025-12-23 17:29:04,206 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:04,206 - INFO - BEGIN (implicit)
2025-12-23 17:29:04,207 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:04,207 - INFO - [cached since 633s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:04,211 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:04,212 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:04,212 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:04,213 - INFO - [cached since 633s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:04,214 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:04,216 - INFO - ROLLBACK
2025-12-23 17:29:09,528 - INFO - get_current_user called
2025-12-23 17:29:09,528 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:09,529 - INFO - BEGIN (implicit)
2025-12-23 17:29:09,530 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:09,530 - INFO - [cached since 638.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:09,531 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:09,531 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:09,532 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:09,532 - INFO - [cached since 638.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:09,533 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:09,533 - INFO - ROLLBACK
2025-12-23 17:29:09,534 - INFO - get_current_user called
2025-12-23 17:29:09,534 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:09,534 - INFO - BEGIN (implicit)
2025-12-23 17:29:09,535 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:09,535 - INFO - [cached since 638.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:09,536 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:09,536 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:09,537 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:09,537 - INFO - [cached since 638.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:09,539 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:09,539 - INFO - ROLLBACK
2025-12-23 17:29:12,060 - INFO - get_current_user called
2025-12-23 17:29:12,060 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:12,061 - INFO - BEGIN (implicit)
2025-12-23 17:29:12,062 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:12,062 - INFO - [cached since 640.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:12,077 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:12,077 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:12,077 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:12,078 - INFO - [cached since 640.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:12,084 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:12,086 - INFO - ROLLBACK
2025-12-23 17:29:12,106 - INFO - get_current_user called
2025-12-23 17:29:12,107 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:12,107 - INFO - BEGIN (implicit)
2025-12-23 17:29:12,108 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:12,108 - INFO - [cached since 640.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:12,114 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:12,114 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:12,114 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:12,114 - INFO - [cached since 640.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:12,117 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:12,117 - INFO - ROLLBACK
2025-12-23 17:29:15,701 - INFO - get_current_user called
2025-12-23 17:29:15,707 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:15,709 - INFO - BEGIN (implicit)
2025-12-23 17:29:15,710 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:15,710 - INFO - [cached since 644.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:15,723 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:15,724 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:15,726 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:15,727 - INFO - [cached since 644.5s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:15,731 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:15,736 - INFO - ROLLBACK
2025-12-23 17:29:15,743 - INFO - get_current_user called
2025-12-23 17:29:15,743 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:15,743 - INFO - BEGIN (implicit)
2025-12-23 17:29:15,743 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:15,743 - INFO - [cached since 644.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:15,752 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:15,752 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:15,753 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:15,753 - INFO - [cached since 644.5s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:15,754 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:15,755 - INFO - ROLLBACK
2025-12-23 17:29:16,581 - INFO - get_current_user called
2025-12-23 17:29:16,581 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:16,582 - INFO - BEGIN (implicit)
2025-12-23 17:29:16,582 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:16,583 - INFO - [cached since 645.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:16,586 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:16,587 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:16,591 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:16,591 - INFO - [cached since 645.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:16,604 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:16,605 - INFO - ROLLBACK
2025-12-23 17:29:16,606 - INFO - get_current_user called
2025-12-23 17:29:16,606 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:16,606 - INFO - BEGIN (implicit)
2025-12-23 17:29:16,606 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:16,606 - INFO - [cached since 645.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:16,622 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:16,622 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:16,622 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:16,622 - INFO - [cached since 645.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:16,632 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:16,633 - INFO - ROLLBACK
2025-12-23 17:29:22,787 - INFO - get_current_user called
2025-12-23 17:29:22,789 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:22,793 - INFO - BEGIN (implicit)
2025-12-23 17:29:22,797 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:22,797 - INFO - [cached since 651.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:22,817 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:22,817 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:22,819 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:22,820 - INFO - [cached since 651.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:22,828 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:22,829 - INFO - ROLLBACK
2025-12-23 17:29:22,830 - INFO - get_current_user called
2025-12-23 17:29:22,830 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:22,830 - INFO - BEGIN (implicit)
2025-12-23 17:29:22,830 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:22,830 - INFO - [cached since 651.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:22,831 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:22,831 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:22,832 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:22,832 - INFO - [cached since 651.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:22,832 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:22,832 - INFO - ROLLBACK
2025-12-23 17:29:27,270 - INFO - get_current_user called
2025-12-23 17:29:27,271 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:27,272 - INFO - BEGIN (implicit)
2025-12-23 17:29:27,273 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:27,273 - INFO - [cached since 656s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:27,274 - INFO - get_current_user called
2025-12-23 17:29:27,274 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:27,275 - INFO - BEGIN (implicit)
2025-12-23 17:29:27,275 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:27,275 - INFO - [cached since 656s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:27,277 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:27,278 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:27,278 - INFO - [cached since 656s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,279 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:27,280 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:29:27,280 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:27,280 - INFO - [cached since 656s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,284 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:29:27,284 - INFO - [cached since 68.19s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,285 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:29:27,286 - INFO - ROLLBACK
2025-12-23 17:29:27,287 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:29:27,287 - INFO - [cached since 68.19s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,289 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:29:27,289 - INFO - [cached since 68.19s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:29:27,291 - INFO - ROLLBACK
2025-12-23 17:29:27,292 - INFO - get_current_user called
2025-12-23 17:29:27,292 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:27,292 - INFO - BEGIN (implicit)
2025-12-23 17:29:27,292 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:27,292 - INFO - [cached since 656s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:27,294 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:27,294 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:27,294 - INFO - [cached since 656s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,295 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:29:27,295 - INFO - [cached since 68.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,296 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:29:27,296 - INFO - [cached since 68.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,297 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:29:27,297 - INFO - [cached since 68.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:29:27,298 - INFO - ROLLBACK
2025-12-23 17:29:27,299 - INFO - get_current_user called
2025-12-23 17:29:27,299 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:29:27,299 - INFO - BEGIN (implicit)
2025-12-23 17:29:27,299 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:29:27,299 - INFO - [cached since 656s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:29:27,300 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:29:27,300 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:29:27,300 - INFO - [cached since 656s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,301 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:29:27,301 - INFO - [cached since 68.21s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,302 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:29:27,302 - INFO - [cached since 68.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:29:27,302 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:29:27,302 - INFO - [cached since 68.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:29:27,303 - INFO - ROLLBACK
2025-12-23 17:30:59,457 - INFO - get_current_user called
2025-12-23 17:30:59,466 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:30:59,469 - INFO - BEGIN (implicit)
2025-12-23 17:30:59,471 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:30:59,471 - INFO - [cached since 748.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:30:59,475 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:30:59,475 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:30:59,477 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:30:59,477 - INFO - [cached since 748.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,480 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:30:59,482 - INFO - ROLLBACK
2025-12-23 17:30:59,483 - INFO - get_current_user called
2025-12-23 17:30:59,483 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:30:59,483 - INFO - BEGIN (implicit)
2025-12-23 17:30:59,483 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:30:59,483 - INFO - [cached since 748.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:30:59,484 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:30:59,485 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:30:59,485 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:30:59,485 - INFO - [cached since 748.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,486 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:30:59,487 - INFO - ROLLBACK
2025-12-23 17:30:59,496 - INFO - get_current_user called
2025-12-23 17:30:59,496 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:30:59,496 - INFO - BEGIN (implicit)
2025-12-23 17:30:59,497 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:30:59,497 - INFO - [cached since 748.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:30:59,500 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:30:59,502 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:30:59,502 - INFO - [cached since 748.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,507 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:30:59,507 - INFO - [cached since 160.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,509 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:30:59,509 - INFO - [cached since 160.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,511 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:30:59,511 - INFO - [cached since 160.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:30:59,511 - INFO - ROLLBACK
2025-12-23 17:30:59,512 - INFO - get_current_user called
2025-12-23 17:30:59,513 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:30:59,513 - INFO - BEGIN (implicit)
2025-12-23 17:30:59,514 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:30:59,514 - INFO - [cached since 748.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:30:59,515 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:30:59,515 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:30:59,515 - INFO - [cached since 748.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,517 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:30:59,517 - INFO - [cached since 160.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,518 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:30:59,518 - INFO - [cached since 160.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,521 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:30:59,521 - INFO - [cached since 160.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:30:59,523 - INFO - ROLLBACK
2025-12-23 17:30:59,524 - INFO - get_current_user called
2025-12-23 17:30:59,524 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:30:59,525 - INFO - BEGIN (implicit)
2025-12-23 17:30:59,525 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:30:59,525 - INFO - [cached since 748.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:30:59,526 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:30:59,526 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:30:59,527 - INFO - [cached since 748.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,527 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:30:59,527 - INFO - [cached since 160.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,528 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:30:59,528 - INFO - [cached since 160.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:30:59,528 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:30:59,528 - INFO - [cached since 160.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:30:59,529 - INFO - ROLLBACK
2025-12-23 17:35:22,211 - INFO - BEGIN (implicit)
2025-12-23 17:35:22,216 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:22,217 - INFO - [cached since 852s ago] {'username_1': 'admin'}
2025-12-23 17:35:22,522 - INFO - ROLLBACK
2025-12-23 17:35:22,556 - INFO - get_current_user called
2025-12-23 17:35:22,559 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:35:22,559 - INFO - BEGIN (implicit)
2025-12-23 17:35:22,560 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:22,560 - INFO - [cached since 852.4s ago] {'username_1': 'admin'}
2025-12-23 17:35:22,566 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:22,567 - INFO - Endpoint /users/me hit for admin
2025-12-23 17:35:22,569 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:22,569 - INFO - [cached since 852.4s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:35:22,573 - INFO - Tenant fetched: Mediboard HQ
2025-12-23 17:35:22,573 - INFO - ROLLBACK
2025-12-23 17:35:22,601 - INFO - get_current_user called
2025-12-23 17:35:22,601 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:35:22,602 - INFO - BEGIN (implicit)
2025-12-23 17:35:22,603 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:22,603 - INFO - [cached since 852.4s ago] {'username_1': 'admin'}
2025-12-23 17:35:22,604 - INFO - get_current_user called
2025-12-23 17:35:22,604 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:35:22,605 - INFO - BEGIN (implicit)
2025-12-23 17:35:22,605 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:22,605 - INFO - [cached since 852.4s ago] {'username_1': 'admin'}
2025-12-23 17:35:22,607 - INFO - get_current_user called
2025-12-23 17:35:22,607 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:35:22,607 - INFO - BEGIN (implicit)
2025-12-23 17:35:22,607 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:22,607 - INFO - [cached since 852.4s ago] {'username_1': 'admin'}
2025-12-23 17:35:22,608 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:22,609 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:22,609 - INFO - [cached since 852.4s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:35:22,621 - INFO - SELECT count(tenants.id) AS count_1 
FROM tenants 
WHERE tenants.is_super_admin = false
2025-12-23 17:35:22,621 - INFO - [generated in 0.00015s] {}
2025-12-23 17:35:22,624 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:22,625 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:22,625 - INFO - [cached since 852.4s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:35:22,627 - INFO - SELECT tenants.id, tenants.name, tenants.domain, tenants.created_at, tenants.is_super_admin 
FROM tenants ORDER BY tenants.created_at
2025-12-23 17:35:22,627 - INFO - [generated in 0.00008s] {}
2025-12-23 17:35:22,627 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:22,628 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:22,628 - INFO - [cached since 852.4s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:35:22,629 - INFO - ROLLBACK
2025-12-23 17:35:22,638 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:35:22,638 - INFO - [generated in 0.00085s] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:35:22,639 - INFO - SELECT count(patients.id) AS count_1 
FROM patients
2025-12-23 17:35:22,639 - INFO - [generated in 0.00008s] {}
2025-12-23 17:35:22,644 - INFO - SELECT count(users.id) AS count_1 
FROM users JOIN tenants ON users.tenant_id = tenants.id 
WHERE tenants.is_super_admin = false AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:35:22,644 - INFO - [generated in 0.00008s] {'roles_1': Jsonb(['admin'])}
2025-12-23 17:35:22,645 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:35:22,645 - INFO - [cached since 0.007618s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:35:22,645 - INFO - ROLLBACK
2025-12-23 17:35:22,652 - INFO - ROLLBACK
2025-12-23 17:35:27,278 - INFO - get_current_user called
2025-12-23 17:35:27,280 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:35:27,281 - INFO - BEGIN (implicit)
2025-12-23 17:35:27,282 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:27,282 - INFO - [cached since 857.1s ago] {'username_1': 'admin'}
2025-12-23 17:35:27,283 - INFO - get_current_user called
2025-12-23 17:35:27,283 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:35:27,283 - INFO - BEGIN (implicit)
2025-12-23 17:35:27,284 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:27,284 - INFO - [cached since 857.1s ago] {'username_1': 'admin'}
2025-12-23 17:35:27,285 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:27,285 - INFO - Endpoint /users/me hit for admin
2025-12-23 17:35:27,285 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:27,285 - INFO - [cached since 857.1s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:35:27,286 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:27,286 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:27,286 - INFO - [cached since 857.1s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:35:27,287 - INFO - Tenant fetched: Mediboard HQ
2025-12-23 17:35:27,287 - INFO - ROLLBACK
2025-12-23 17:35:27,288 - INFO - SELECT tenants.id, tenants.name, tenants.domain, tenants.created_at, tenants.is_super_admin 
FROM tenants ORDER BY tenants.created_at
2025-12-23 17:35:27,288 - INFO - [cached since 4.661s ago] {}
2025-12-23 17:35:27,290 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:35:27,291 - INFO - [cached since 4.653s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:35:27,294 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:35:27,294 - INFO - [cached since 4.657s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:35:27,295 - INFO - ROLLBACK
2025-12-23 17:35:32,511 - INFO - get_current_user called
2025-12-23 17:35:32,515 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:35:32,517 - INFO - BEGIN (implicit)
2025-12-23 17:35:32,518 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:32,518 - INFO - [cached since 862.3s ago] {'username_1': 'admin'}
2025-12-23 17:35:32,523 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:32,524 - INFO - Endpoint /users/me hit for admin
2025-12-23 17:35:32,524 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:32,524 - INFO - [cached since 862.3s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:35:32,525 - INFO - Tenant fetched: Mediboard HQ
2025-12-23 17:35:32,526 - INFO - ROLLBACK
2025-12-23 17:35:32,537 - INFO - get_current_user called
2025-12-23 17:35:32,537 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:35:32,537 - INFO - BEGIN (implicit)
2025-12-23 17:35:32,538 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:32,538 - INFO - [cached since 862.3s ago] {'username_1': 'admin'}
2025-12-23 17:35:32,540 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:32,541 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:32,541 - INFO - [cached since 862.3s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:35:32,542 - INFO - SELECT tenants.id, tenants.name, tenants.domain, tenants.created_at, tenants.is_super_admin 
FROM tenants ORDER BY tenants.created_at
2025-12-23 17:35:32,542 - INFO - [cached since 9.915s ago] {}
2025-12-23 17:35:32,543 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:35:32,543 - INFO - [cached since 9.906s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:35:32,543 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:35:32,543 - INFO - [cached since 9.906s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:35:32,544 - INFO - ROLLBACK
2025-12-23 17:35:47,850 - INFO - get_current_user called
2025-12-23 17:35:47,852 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:35:47,861 - INFO - BEGIN (implicit)
2025-12-23 17:35:47,862 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:47,862 - INFO - [cached since 877.7s ago] {'username_1': 'admin'}
2025-12-23 17:35:47,865 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:47,867 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:47,867 - INFO - [cached since 877.7s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:35:47,870 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:35:47,870 - INFO - [generated in 0.00021s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 1}
2025-12-23 17:35:47,871 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:35:47,871 - INFO - [cached since 286s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:35:47,872 - INFO - ROLLBACK
2025-12-23 17:35:48,008 - INFO - get_current_user called
2025-12-23 17:35:48,009 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:35:48,010 - INFO - BEGIN (implicit)
2025-12-23 17:35:48,010 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:48,010 - INFO - [cached since 877.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:35:48,017 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:48,018 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:35:48,018 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:48,018 - INFO - [cached since 877.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:35:48,021 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:35:48,022 - INFO - ROLLBACK
2025-12-23 17:35:48,037 - INFO - get_current_user called
2025-12-23 17:35:48,038 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:35:48,038 - INFO - BEGIN (implicit)
2025-12-23 17:35:48,039 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:35:48,039 - INFO - [cached since 877.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:35:48,040 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:35:48,041 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:35:48,041 - INFO - [cached since 877.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:35:48,043 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:35:48,043 - INFO - [cached since 290s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:35:48,045 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:35:48,045 - INFO - [cached since 290s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:35:48,046 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:35:48,046 - INFO - [cached since 290s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:35:48,048 - INFO - ROLLBACK
2025-12-23 17:37:19,844 - INFO - get_current_user called
2025-12-23 17:37:19,856 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:19,861 - INFO - BEGIN (implicit)
2025-12-23 17:37:19,863 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:19,864 - INFO - [cached since 969.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:19,869 - INFO - get_current_user called
2025-12-23 17:37:19,869 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:19,869 - INFO - BEGIN (implicit)
2025-12-23 17:37:19,869 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:19,869 - INFO - [cached since 969.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:19,869 - INFO - get_current_user called
2025-12-23 17:37:19,869 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:19,870 - INFO - BEGIN (implicit)
2025-12-23 17:37:19,870 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:19,870 - INFO - [cached since 969.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:19,870 - INFO - get_current_user called
2025-12-23 17:37:19,870 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:19,870 - INFO - BEGIN (implicit)
2025-12-23 17:37:19,870 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:19,870 - INFO - [cached since 969.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:19,897 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:19,902 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:37:19,902 - INFO - [cached since 378s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:37:19,903 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:19,904 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:37:19,904 - INFO - [cached since 378.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:37:19,904 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:19,904 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:37:19,905 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:19,905 - INFO - [cached since 969.7s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:19,928 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:19,929 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:19,929 - INFO - [cached since 378s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:19,930 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:37:19,931 - INFO - ROLLBACK
2025-12-23 17:37:19,931 - INFO - ROLLBACK
2025-12-23 17:37:19,931 - INFO - ROLLBACK
2025-12-23 17:37:19,932 - INFO - ROLLBACK
2025-12-23 17:37:19,933 - INFO - get_current_user called
2025-12-23 17:37:19,933 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:19,933 - INFO - BEGIN (implicit)
2025-12-23 17:37:19,933 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:19,933 - INFO - [cached since 969.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:19,933 - INFO - get_current_user called
2025-12-23 17:37:19,933 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:19,935 - INFO - get_current_user called
2025-12-23 17:37:19,935 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:19,936 - INFO - BEGIN (implicit)
2025-12-23 17:37:19,936 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:19,936 - INFO - [cached since 969.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:19,938 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:19,938 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:37:19,938 - INFO - [cached since 378.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:37:19,939 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:19,939 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:19,939 - INFO - [cached since 378s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:19,939 - INFO - ROLLBACK
2025-12-23 17:37:19,940 - INFO - ROLLBACK
2025-12-23 17:37:20,012 - INFO - BEGIN (implicit)
2025-12-23 17:37:20,012 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:20,012 - INFO - [cached since 969.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:20,017 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:20,017 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:37:20,017 - INFO - [cached since 378.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:37:20,019 - INFO - ROLLBACK
2025-12-23 17:37:20,510 - INFO - get_current_user called
2025-12-23 17:37:20,510 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:20,510 - INFO - BEGIN (implicit)
2025-12-23 17:37:20,511 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:20,511 - INFO - [cached since 970.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:20,511 - INFO - get_current_user called
2025-12-23 17:37:20,511 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:20,511 - INFO - BEGIN (implicit)
2025-12-23 17:37:20,511 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:20,511 - INFO - [cached since 970.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:20,512 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:20,512 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:20,512 - INFO - [cached since 970.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,512 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:20,512 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:37:20,512 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:20,512 - INFO - [cached since 970.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,513 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:20,513 - INFO - [cached since 382.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,513 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:37:20,513 - INFO - ROLLBACK
2025-12-23 17:37:20,516 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:20,516 - INFO - [cached since 382.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,517 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:37:20,518 - INFO - [cached since 382.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:37:20,519 - INFO - ROLLBACK
2025-12-23 17:37:20,520 - INFO - get_current_user called
2025-12-23 17:37:20,520 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:20,520 - INFO - BEGIN (implicit)
2025-12-23 17:37:20,520 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:20,520 - INFO - [cached since 970.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:20,521 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:20,521 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:20,521 - INFO - [cached since 970.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,522 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:20,522 - INFO - [cached since 382.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,522 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:20,522 - INFO - [cached since 382.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,522 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:37:20,522 - INFO - [cached since 382.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:37:20,523 - INFO - ROLLBACK
2025-12-23 17:37:20,534 - INFO - get_current_user called
2025-12-23 17:37:20,534 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:20,534 - INFO - BEGIN (implicit)
2025-12-23 17:37:20,535 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:20,535 - INFO - [cached since 970.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:20,535 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:20,535 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:20,535 - INFO - [cached since 970.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,536 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:20,536 - INFO - [cached since 382.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,537 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:20,537 - INFO - [cached since 382.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:20,537 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:37:20,537 - INFO - [cached since 382.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:37:20,538 - INFO - ROLLBACK
2025-12-23 17:37:49,875 - INFO - get_current_user called
2025-12-23 17:37:49,877 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:49,880 - INFO - BEGIN (implicit)
2025-12-23 17:37:49,882 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:49,882 - INFO - [cached since 999.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:49,884 - INFO - get_current_user called
2025-12-23 17:37:49,884 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:49,884 - INFO - BEGIN (implicit)
2025-12-23 17:37:49,885 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:49,885 - INFO - [cached since 999.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:49,886 - INFO - get_current_user called
2025-12-23 17:37:49,886 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:49,887 - INFO - BEGIN (implicit)
2025-12-23 17:37:49,887 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:49,887 - INFO - [cached since 999.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:49,888 - INFO - get_current_user called
2025-12-23 17:37:49,888 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:49,888 - INFO - BEGIN (implicit)
2025-12-23 17:37:49,888 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:49,888 - INFO - [cached since 999.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:49,889 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:49,890 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:37:49,890 - INFO - [cached since 408.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:37:49,891 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:49,891 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:37:49,891 - INFO - [cached since 408s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:37:49,892 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:49,892 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:49,892 - INFO - [cached since 408s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:49,893 - INFO - ROLLBACK
2025-12-23 17:37:49,894 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:49,894 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:37:49,894 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:49,894 - INFO - [cached since 999.7s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:49,895 - INFO - ROLLBACK
2025-12-23 17:37:49,895 - INFO - get_current_user called
2025-12-23 17:37:49,895 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:49,895 - INFO - BEGIN (implicit)
2025-12-23 17:37:49,895 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:49,895 - INFO - [cached since 999.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:49,896 - INFO - get_current_user called
2025-12-23 17:37:49,896 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:49,896 - INFO - BEGIN (implicit)
2025-12-23 17:37:49,896 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:49,896 - INFO - [cached since 999.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:49,897 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:37:49,898 - INFO - ROLLBACK
2025-12-23 17:37:49,898 - INFO - ROLLBACK
2025-12-23 17:37:49,898 - INFO - get_current_user called
2025-12-23 17:37:49,898 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:49,899 - INFO - BEGIN (implicit)
2025-12-23 17:37:49,899 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:49,899 - INFO - [cached since 999.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:49,899 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:49,899 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:49,899 - INFO - [cached since 408s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:49,899 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:49,900 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:37:49,900 - INFO - [cached since 408.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:37:49,900 - INFO - ROLLBACK
2025-12-23 17:37:49,901 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:49,901 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:37:49,901 - INFO - [cached since 408s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:37:49,902 - INFO - ROLLBACK
2025-12-23 17:37:49,902 - INFO - ROLLBACK
2025-12-23 17:37:51,008 - INFO - get_current_user called
2025-12-23 17:37:51,008 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,009 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,010 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,010 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,011 - INFO - get_current_user called
2025-12-23 17:37:51,011 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,012 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,012 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,012 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,013 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,013 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:37:51,014 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:51,014 - INFO - [cached since 1001s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,015 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,015 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:51,016 - INFO - [cached since 1001s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,016 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:37:51,017 - INFO - ROLLBACK
2025-12-23 17:37:51,019 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:51,019 - INFO - [cached since 413s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,021 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:51,021 - INFO - [cached since 413s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,022 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:37:51,023 - INFO - [cached since 413s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:37:51,024 - INFO - ROLLBACK
2025-12-23 17:37:51,025 - INFO - get_current_user called
2025-12-23 17:37:51,025 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,026 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,026 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,026 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,028 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,028 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:51,028 - INFO - [cached since 1001s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,029 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:51,029 - INFO - [cached since 413s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,030 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:51,030 - INFO - [cached since 413s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,034 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:37:51,035 - INFO - [cached since 413s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:37:51,036 - INFO - ROLLBACK
2025-12-23 17:37:51,037 - INFO - get_current_user called
2025-12-23 17:37:51,037 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,038 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,038 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,038 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,039 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,039 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:51,039 - INFO - [cached since 1001s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,040 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:51,040 - INFO - [cached since 413s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,040 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:51,041 - INFO - [cached since 413s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,041 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:37:51,041 - INFO - [cached since 413s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:37:51,042 - INFO - ROLLBACK
2025-12-23 17:37:51,595 - INFO - get_current_user called
2025-12-23 17:37:51,596 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,598 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,599 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,599 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,600 - INFO - get_current_user called
2025-12-23 17:37:51,601 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,601 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,602 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,602 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,603 - INFO - get_current_user called
2025-12-23 17:37:51,603 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,604 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,604 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,604 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,605 - INFO - get_current_user called
2025-12-23 17:37:51,605 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,605 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,605 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,605 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,607 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,607 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:37:51,607 - INFO - [cached since 409.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:37:51,608 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,608 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:51,608 - INFO - [cached since 409.7s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,609 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,609 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:37:51,609 - INFO - [cached since 409.7s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:37:51,609 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,610 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:37:51,610 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:51,610 - INFO - [cached since 1001s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,612 - INFO - ROLLBACK
2025-12-23 17:37:51,612 - INFO - ROLLBACK
2025-12-23 17:37:51,612 - INFO - ROLLBACK
2025-12-23 17:37:51,613 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:37:51,613 - INFO - ROLLBACK
2025-12-23 17:37:51,614 - INFO - get_current_user called
2025-12-23 17:37:51,614 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,614 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,614 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,614 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,615 - INFO - get_current_user called
2025-12-23 17:37:51,615 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,615 - INFO - get_current_user called
2025-12-23 17:37:51,616 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:51,617 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,617 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:37:51,617 - INFO - [cached since 409.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:37:51,618 - INFO - ROLLBACK
2025-12-23 17:37:51,669 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,669 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,669 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,670 - INFO - BEGIN (implicit)
2025-12-23 17:37:51,670 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:51,670 - INFO - [cached since 1001s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:51,673 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,673 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:37:51,673 - INFO - [cached since 409.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:51,674 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:51,674 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:37:51,674 - INFO - [cached since 409.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:37:51,675 - INFO - ROLLBACK
2025-12-23 17:37:51,676 - INFO - ROLLBACK
2025-12-23 17:37:52,292 - INFO - get_current_user called
2025-12-23 17:37:52,293 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:52,293 - INFO - BEGIN (implicit)
2025-12-23 17:37:52,294 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:52,294 - INFO - [cached since 1002s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:52,295 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:52,295 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:37:52,296 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:52,296 - INFO - [cached since 1002s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:52,296 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:37:52,297 - INFO - ROLLBACK
2025-12-23 17:37:52,601 - INFO - get_current_user called
2025-12-23 17:37:52,601 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:52,602 - INFO - BEGIN (implicit)
2025-12-23 17:37:52,603 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:52,603 - INFO - [cached since 1002s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:52,605 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:52,607 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:37:52,607 - INFO - [cached since 410.7s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 17:37:52,609 - INFO - ROLLBACK
2025-12-23 17:37:53,962 - INFO - get_current_user called
2025-12-23 17:37:53,963 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:37:53,964 - INFO - BEGIN (implicit)
2025-12-23 17:37:53,966 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:37:53,966 - INFO - [cached since 1004s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:37:53,969 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:37:53,969 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:37:53,969 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:37:53,970 - INFO - [cached since 1004s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:37:53,971 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:37:53,972 - INFO - ROLLBACK
2025-12-23 17:39:01,054 - INFO - get_current_user called
2025-12-23 17:39:01,064 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:39:01,067 - INFO - BEGIN (implicit)
2025-12-23 17:39:01,069 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:39:01,070 - INFO - [cached since 1071s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:39:01,072 - INFO - get_current_user called
2025-12-23 17:39:01,072 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:39:01,073 - INFO - BEGIN (implicit)
2025-12-23 17:39:01,073 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:39:01,073 - INFO - [cached since 1071s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:39:01,073 - INFO - get_current_user called
2025-12-23 17:39:01,073 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:39:01,073 - INFO - BEGIN (implicit)
2025-12-23 17:39:01,073 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:39:01,073 - INFO - [cached since 1071s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:39:01,073 - INFO - get_current_user called
2025-12-23 17:39:01,073 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:39:01,073 - INFO - BEGIN (implicit)
2025-12-23 17:39:01,073 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:39:01,074 - INFO - [cached since 1071s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:39:01,094 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:39:01,098 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:39:01,098 - INFO - [cached since 479.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:39:01,099 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:39:01,099 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:39:01,099 - INFO - [cached since 479.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:39:01,099 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:39:01,099 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:39:01,100 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:39:01,100 - INFO - [cached since 1071s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:39:01,100 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:39:01,100 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:39:01,100 - INFO - [cached since 479.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:39:01,101 - INFO - ROLLBACK
2025-12-23 17:39:01,101 - INFO - ROLLBACK
2025-12-23 17:39:01,101 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:39:01,102 - INFO - ROLLBACK
2025-12-23 17:39:01,102 - INFO - ROLLBACK
2025-12-23 17:39:01,846 - INFO - get_current_user called
2025-12-23 17:39:01,846 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:39:01,847 - INFO - BEGIN (implicit)
2025-12-23 17:39:01,847 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:39:01,847 - INFO - [cached since 1072s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:39:01,848 - INFO - get_current_user called
2025-12-23 17:39:01,848 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:39:01,848 - INFO - BEGIN (implicit)
2025-12-23 17:39:01,849 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:39:01,849 - INFO - [cached since 1072s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:39:01,850 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:39:01,850 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:39:01,850 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:39:01,850 - INFO - [cached since 1072s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:39:01,851 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:39:01,851 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:39:01,851 - INFO - [cached since 1072s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:39:01,851 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:39:01,852 - INFO - ROLLBACK
2025-12-23 17:39:01,853 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:39:01,853 - INFO - [cached since 483.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:39:01,858 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:39:01,858 - INFO - [cached since 483.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:39:01,859 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:39:01,859 - INFO - [cached since 483.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:39:01,861 - INFO - ROLLBACK
2025-12-23 17:40:26,165 - INFO - get_current_user called
2025-12-23 17:40:26,167 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:26,169 - INFO - BEGIN (implicit)
2025-12-23 17:40:26,170 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:26,170 - INFO - [cached since 1156s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:26,176 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:26,176 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:40:26,176 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:40:26,176 - INFO - [cached since 1156s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:26,177 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:40:26,178 - INFO - ROLLBACK
2025-12-23 17:40:26,178 - INFO - get_current_user called
2025-12-23 17:40:26,178 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:26,178 - INFO - BEGIN (implicit)
2025-12-23 17:40:26,179 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:26,179 - INFO - [cached since 1156s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:26,180 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:26,180 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:40:26,180 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:40:26,180 - INFO - [cached since 1156s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:26,180 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:40:26,180 - INFO - ROLLBACK
2025-12-23 17:40:27,778 - INFO - get_current_user called
2025-12-23 17:40:27,787 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:27,795 - INFO - BEGIN (implicit)
2025-12-23 17:40:27,797 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:27,797 - INFO - [cached since 1158s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:27,798 - INFO - get_current_user called
2025-12-23 17:40:27,798 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:27,799 - INFO - BEGIN (implicit)
2025-12-23 17:40:27,799 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:27,799 - INFO - [cached since 1158s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:27,802 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:27,803 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:40:27,803 - INFO - [cached since 1158s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,803 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:27,803 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:40:27,804 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:40:27,804 - INFO - [cached since 1158s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,805 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:40:27,805 - INFO - [cached since 569.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,806 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:40:27,807 - INFO - ROLLBACK
2025-12-23 17:40:27,808 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:40:27,808 - INFO - [cached since 569.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,809 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:40:27,809 - INFO - [cached since 569.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:40:27,810 - INFO - ROLLBACK
2025-12-23 17:40:27,811 - INFO - get_current_user called
2025-12-23 17:40:27,811 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:27,811 - INFO - BEGIN (implicit)
2025-12-23 17:40:27,812 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:27,812 - INFO - [cached since 1158s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:27,814 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:27,814 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:40:27,814 - INFO - [cached since 1158s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,815 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:40:27,815 - INFO - [cached since 569.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,816 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:40:27,816 - INFO - [cached since 569.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,817 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:40:27,817 - INFO - [cached since 569.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:40:27,818 - INFO - ROLLBACK
2025-12-23 17:40:27,825 - INFO - get_current_user called
2025-12-23 17:40:27,826 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:27,826 - INFO - BEGIN (implicit)
2025-12-23 17:40:27,826 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:27,826 - INFO - [cached since 1158s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:27,828 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:27,828 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:40:27,828 - INFO - [cached since 1158s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,829 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:40:27,829 - INFO - [cached since 569.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,830 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:40:27,830 - INFO - [cached since 569.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:27,830 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:40:27,830 - INFO - [cached since 569.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:40:27,831 - INFO - ROLLBACK
2025-12-23 17:40:30,195 - INFO - get_current_user called
2025-12-23 17:40:30,200 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:30,202 - INFO - BEGIN (implicit)
2025-12-23 17:40:30,202 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:30,202 - INFO - [cached since 1160s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:30,203 - INFO - get_current_user called
2025-12-23 17:40:30,204 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:30,204 - INFO - BEGIN (implicit)
2025-12-23 17:40:30,205 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:30,205 - INFO - [cached since 1160s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:30,206 - INFO - get_current_user called
2025-12-23 17:40:30,206 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:30,206 - INFO - BEGIN (implicit)
2025-12-23 17:40:30,206 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:30,206 - INFO - [cached since 1160s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:30,207 - INFO - get_current_user called
2025-12-23 17:40:30,207 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:30,207 - INFO - BEGIN (implicit)
2025-12-23 17:40:30,208 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:30,208 - INFO - [cached since 1160s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:30,208 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:30,209 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:40:30,210 - INFO - [cached since 568.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:40:30,210 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:30,211 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:40:30,211 - INFO - [cached since 568.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:40:30,211 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:30,212 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:40:30,212 - INFO - [cached since 568.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:30,212 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:30,212 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:40:30,213 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:40:30,213 - INFO - [cached since 1160s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:30,213 - INFO - ROLLBACK
2025-12-23 17:40:30,214 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:40:30,215 - INFO - ROLLBACK
2025-12-23 17:40:30,215 - INFO - ROLLBACK
2025-12-23 17:40:30,215 - INFO - ROLLBACK
2025-12-23 17:40:30,216 - INFO - get_current_user called
2025-12-23 17:40:30,216 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:30,216 - INFO - BEGIN (implicit)
2025-12-23 17:40:30,216 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:30,216 - INFO - [cached since 1160s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:30,217 - INFO - get_current_user called
2025-12-23 17:40:30,217 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:30,217 - INFO - BEGIN (implicit)
2025-12-23 17:40:30,218 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:30,218 - INFO - [cached since 1160s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:30,218 - INFO - get_current_user called
2025-12-23 17:40:30,218 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:30,221 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:30,221 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:40:30,221 - INFO - [cached since 568.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:40:30,221 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:30,221 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:40:30,222 - INFO - [cached since 568.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:40:30,222 - INFO - ROLLBACK
2025-12-23 17:40:30,223 - INFO - ROLLBACK
2025-12-23 17:40:30,330 - INFO - BEGIN (implicit)
2025-12-23 17:40:30,330 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:30,331 - INFO - [cached since 1160s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:30,334 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:30,335 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:40:30,335 - INFO - [cached since 568.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:30,337 - INFO - ROLLBACK
2025-12-23 17:40:31,041 - INFO - get_current_user called
2025-12-23 17:40:31,042 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:31,043 - INFO - BEGIN (implicit)
2025-12-23 17:40:31,044 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:31,044 - INFO - [cached since 1161s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:31,046 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:31,046 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:40:31,047 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:40:31,047 - INFO - [cached since 1161s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:40:31,048 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:40:31,049 - INFO - ROLLBACK
2025-12-23 17:40:31,347 - INFO - get_current_user called
2025-12-23 17:40:31,348 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:40:31,349 - INFO - BEGIN (implicit)
2025-12-23 17:40:31,349 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:40:31,349 - INFO - [cached since 1161s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:40:31,351 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:40:31,354 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:40:31,354 - INFO - [cached since 569.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 17:40:31,357 - INFO - ROLLBACK
2025-12-23 17:43:44,638 - INFO - get_current_user called
2025-12-23 17:43:44,655 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:44,663 - INFO - BEGIN (implicit)
2025-12-23 17:43:44,666 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:44,667 - INFO - [cached since 1354s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:44,671 - INFO - get_current_user called
2025-12-23 17:43:44,671 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:44,671 - INFO - BEGIN (implicit)
2025-12-23 17:43:44,671 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:44,671 - INFO - [cached since 1354s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:44,672 - INFO - get_current_user called
2025-12-23 17:43:44,672 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:44,672 - INFO - BEGIN (implicit)
2025-12-23 17:43:44,672 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:44,672 - INFO - [cached since 1354s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:44,672 - INFO - get_current_user called
2025-12-23 17:43:44,672 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:44,672 - INFO - BEGIN (implicit)
2025-12-23 17:43:44,672 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:44,672 - INFO - [cached since 1354s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:44,688 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:44,689 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:43:44,689 - INFO - [cached since 762.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 17:43:44,690 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:44,693 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:43:44,693 - INFO - [cached since 762.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 17:43:44,693 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:44,693 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:43:44,693 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:43:44,693 - INFO - [cached since 1354s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:43:44,694 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:44,694 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:43:44,694 - INFO - [cached since 762.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:43:44,696 - INFO - ROLLBACK
2025-12-23 17:43:44,696 - INFO - ROLLBACK
2025-12-23 17:43:44,696 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:43:44,697 - INFO - ROLLBACK
2025-12-23 17:43:44,697 - INFO - ROLLBACK
2025-12-23 17:43:45,476 - INFO - get_current_user called
2025-12-23 17:43:45,477 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:45,477 - INFO - BEGIN (implicit)
2025-12-23 17:43:45,478 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:45,478 - INFO - [cached since 1355s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:45,482 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:45,483 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:43:45,484 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:43:45,484 - INFO - [cached since 1355s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:43:45,485 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:43:45,485 - INFO - ROLLBACK
2025-12-23 17:43:45,794 - INFO - get_current_user called
2025-12-23 17:43:45,795 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:45,796 - INFO - BEGIN (implicit)
2025-12-23 17:43:45,796 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:45,796 - INFO - [cached since 1356s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:45,798 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:45,800 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:43:45,800 - INFO - [cached since 763.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 17:43:45,801 - INFO - ROLLBACK
2025-12-23 17:43:47,009 - INFO - get_current_user called
2025-12-23 17:43:47,009 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:47,010 - INFO - BEGIN (implicit)
2025-12-23 17:43:47,011 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:47,011 - INFO - [cached since 1357s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:47,012 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:47,013 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:43:47,014 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:43:47,017 - INFO - [cached since 1357s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:43:47,018 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:43:47,019 - INFO - ROLLBACK
2025-12-23 17:43:47,335 - INFO - get_current_user called
2025-12-23 17:43:47,335 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:47,336 - INFO - BEGIN (implicit)
2025-12-23 17:43:47,337 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:47,337 - INFO - [cached since 1357s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:47,338 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:47,339 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:43:47,339 - INFO - [cached since 765.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 17:43:47,340 - INFO - ROLLBACK
2025-12-23 17:43:48,286 - INFO - get_current_user called
2025-12-23 17:43:48,286 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:48,286 - INFO - BEGIN (implicit)
2025-12-23 17:43:48,286 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:48,286 - INFO - [cached since 1358s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:48,287 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:48,287 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:43:48,287 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:43:48,287 - INFO - [cached since 1358s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:43:48,288 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:43:48,288 - INFO - ROLLBACK
2025-12-23 17:43:48,875 - INFO - get_current_user called
2025-12-23 17:43:48,876 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:48,876 - INFO - BEGIN (implicit)
2025-12-23 17:43:48,877 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:48,877 - INFO - [cached since 1359s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:48,878 - INFO - get_current_user called
2025-12-23 17:43:48,878 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:43:48,878 - INFO - BEGIN (implicit)
2025-12-23 17:43:48,879 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:43:48,880 - INFO - [cached since 1359s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:43:48,881 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:48,882 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:43:48,882 - INFO - [cached since 767s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:43:48,883 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:43:48,883 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:43:48,884 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:43:48,884 - INFO - [cached since 1359s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:43:48,885 - INFO - ROLLBACK
2025-12-23 17:43:48,885 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:43:48,885 - INFO - ROLLBACK
2025-12-23 17:45:07,794 - INFO - get_current_user called
2025-12-23 17:45:07,801 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:45:07,804 - INFO - BEGIN (implicit)
2025-12-23 17:45:07,806 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:45:07,807 - INFO - [cached since 1438s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:45:07,831 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:45:07,839 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:45:07,840 - INFO - [cached since 1438s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:45:08,119 - INFO - INSERT INTO users (id, tenant_id, username, hashed_password, roles, is_active, created_at) VALUES (%(id)s::VARCHAR, %(tenant_id)s::VARCHAR, %(username)s::VARCHAR, %(hashed_password)s::VARCHAR, %(roles)s::JSONB, %(is_active)s, %(created_at)s::TIMESTAMP WITHOUT TIME ZONE)
2025-12-23 17:45:08,119 - INFO - [generated in 0.00371s] {'id': 'c925af4f-bb05-42be-a9c2-669d47210bd6', 'tenant_id': '28f9a367-8132-4723-a360-333fbc5db17b', 'username': 'dr_patil', 'hashed_password': '$2b$12$9d7EGjoavLy.W2MDPiTLSeKL9ztNosT37XhHwwXu6KOILOu6wTLou', 'roles': Jsonb(['doctor']), 'is_active': True, 'created_at': datetime.datetime(2025, 12, 23, 12, 15, 8, 119272)}
2025-12-23 17:45:08,134 - INFO - COMMIT
2025-12-23 17:45:08,154 - INFO - get_current_user called
2025-12-23 17:45:08,154 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:45:08,154 - INFO - BEGIN (implicit)
2025-12-23 17:45:08,155 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:45:08,155 - INFO - [cached since 1438s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:45:08,157 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:45:08,158 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:45:08,158 - INFO - [cached since 846.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:45:08,159 - INFO - ROLLBACK
2025-12-23 17:45:36,123 - INFO - get_current_user called
2025-12-23 17:45:36,131 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:45:36,134 - INFO - BEGIN (implicit)
2025-12-23 17:45:36,136 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:45:36,136 - INFO - [cached since 1466s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:45:36,138 - INFO - get_current_user called
2025-12-23 17:45:36,138 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:45:36,138 - INFO - BEGIN (implicit)
2025-12-23 17:45:36,138 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:45:36,139 - INFO - [cached since 1466s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:45:36,158 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:45:36,172 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:45:36,172 - INFO - [generated in 0.00017s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:45:36,173 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:45:36,173 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:45:36,173 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:45:36,173 - INFO - [cached since 1466s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:45:36,174 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:45:36,175 - INFO - ROLLBACK
2025-12-23 17:45:36,180 - INFO - ROLLBACK
2025-12-23 17:45:43,592 - INFO - get_current_user called
2025-12-23 17:45:43,593 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:45:43,593 - INFO - BEGIN (implicit)
2025-12-23 17:45:43,594 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:45:43,594 - INFO - [cached since 1473s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:45:43,595 - INFO - get_current_user called
2025-12-23 17:45:43,595 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:45:43,595 - INFO - BEGIN (implicit)
2025-12-23 17:45:43,596 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:45:43,596 - INFO - [cached since 1473s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:45:43,597 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:45:43,598 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:45:43,598 - INFO - [cached since 881.7s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:45:43,598 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:45:43,599 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:45:43,599 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:45:43,599 - INFO - [cached since 1473s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:45:43,601 - INFO - ROLLBACK
2025-12-23 17:45:43,601 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:45:43,602 - INFO - ROLLBACK
2025-12-23 17:47:21,325 - INFO - select pg_catalog.version()
2025-12-23 17:47:21,326 - INFO - [raw sql] {}
2025-12-23 17:47:21,354 - INFO - select current_schema()
2025-12-23 17:47:21,354 - INFO - [raw sql] {}
2025-12-23 17:47:21,358 - INFO - show standard_conforming_strings
2025-12-23 17:47:21,358 - INFO - [raw sql] {}
2025-12-23 17:47:21,379 - INFO - BEGIN (implicit)
2025-12-23 17:47:21,393 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:47:21,393 - INFO - [generated in 0.00034s] {'table_name': 'tenants', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:47:21,409 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:47:21,409 - INFO - [cached since 0.01621s ago] {'table_name': 'tenant_settings', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:47:21,413 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:47:21,414 - INFO - [cached since 0.0204s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:47:21,414 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:47:21,414 - INFO - [cached since 0.02128s ago] {'table_name': 'patients', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:47:21,415 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:47:21,415 - INFO - [cached since 0.02214s ago] {'table_name': 'clinical_records', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:47:21,416 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:47:21,416 - INFO - [cached since 0.0231s ago] {'table_name': 'appointments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:47:21,418 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:47:21,418 - INFO - [cached since 0.02481s ago] {'table_name': 'attachments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:47:21,419 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:47:21,421 - INFO - [cached since 0.02833s ago] {'table_name': 'prescriptions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:47:21,422 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 17:47:21,423 - INFO - [cached since 0.02934s ago] {'table_name': 'invoices', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 17:47:21,423 - INFO - COMMIT
2025-12-23 17:47:21,526 - INFO - get_current_user called
2025-12-23 17:47:21,544 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:47:21,544 - INFO - BEGIN (implicit)
2025-12-23 17:47:21,559 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:47:21,559 - INFO - [generated in 0.00036s] {'username_1': 'apollo_admin'}
2025-12-23 17:47:21,565 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:47:21,566 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:47:21,567 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:47:21,567 - INFO - [generated in 0.00011s] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:47:21,570 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:47:21,571 - INFO - [generated in 0.00009s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:47:21,571 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:47:21,573 - INFO - ROLLBACK
2025-12-23 17:47:21,617 - INFO - get_current_user called
2025-12-23 17:47:21,618 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:47:21,619 - INFO - BEGIN (implicit)
2025-12-23 17:47:21,619 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:47:21,619 - INFO - [cached since 0.06005s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:47:21,621 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:47:21,622 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:47:21,622 - INFO - [generated in 0.00009s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:47:21,623 - INFO - ROLLBACK
2025-12-23 17:47:23,876 - INFO - get_current_user called
2025-12-23 17:47:23,877 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:47:23,879 - INFO - BEGIN (implicit)
2025-12-23 17:47:23,880 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:47:23,880 - INFO - [cached since 2.321s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:47:23,882 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:47:23,882 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:47:23,883 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:47:23,883 - INFO - [cached since 2.316s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:47:23,884 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:47:23,884 - INFO - [cached since 2.314s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:47:23,886 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:47:23,888 - INFO - ROLLBACK
2025-12-23 17:47:24,175 - INFO - get_current_user called
2025-12-23 17:47:24,176 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:47:24,176 - INFO - BEGIN (implicit)
2025-12-23 17:47:24,176 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:47:24,177 - INFO - [cached since 2.618s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:47:24,178 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:47:24,181 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 17:47:24,181 - INFO - [generated in 0.00025s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 17:47:24,185 - INFO - ROLLBACK
2025-12-23 17:48:03,383 - INFO - get_current_user called
2025-12-23 17:48:03,398 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:48:03,413 - INFO - BEGIN (implicit)
2025-12-23 17:48:03,416 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:48:03,417 - INFO - [cached since 41.86s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:48:03,440 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:48:03,440 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:48:03,440 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:48:03,440 - INFO - [cached since 41.87s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:03,441 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:48:03,441 - INFO - [cached since 41.87s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:03,442 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:48:03,443 - INFO - ROLLBACK
2025-12-23 17:48:04,556 - INFO - get_current_user called
2025-12-23 17:48:04,557 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:48:04,557 - INFO - BEGIN (implicit)
2025-12-23 17:48:04,558 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:48:04,558 - INFO - [cached since 43s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:48:04,558 - INFO - get_current_user called
2025-12-23 17:48:04,558 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:48:04,561 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:48:04,562 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:48:04,562 - INFO - [cached since 42.94s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:04,567 - INFO - ROLLBACK
2025-12-23 17:48:04,656 - INFO - BEGIN (implicit)
2025-12-23 17:48:04,656 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:48:04,656 - INFO - [cached since 43.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:48:04,659 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:48:04,660 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:48:04,661 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:48:04,661 - INFO - [cached since 43.09s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:04,662 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:48:04,663 - INFO - [cached since 43.09s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:04,664 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:48:04,665 - INFO - ROLLBACK
2025-12-23 17:48:06,694 - INFO - get_current_user called
2025-12-23 17:48:06,696 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:48:06,697 - INFO - BEGIN (implicit)
2025-12-23 17:48:06,698 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:48:06,698 - INFO - [cached since 45.14s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:48:06,699 - INFO - get_current_user called
2025-12-23 17:48:06,699 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:48:06,700 - INFO - BEGIN (implicit)
2025-12-23 17:48:06,700 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:48:06,700 - INFO - [cached since 45.14s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:48:06,702 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:48:06,702 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:48:06,702 - INFO - [cached since 45.13s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:06,703 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:48:06,703 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:48:06,703 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:48:06,703 - INFO - [cached since 45.14s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:06,704 - INFO - ROLLBACK
2025-12-23 17:48:06,705 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:48:06,705 - INFO - [cached since 45.13s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:06,706 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:48:06,707 - INFO - ROLLBACK
2025-12-23 17:48:46,170 - INFO - get_current_user called
2025-12-23 17:48:46,194 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:48:46,201 - INFO - BEGIN (implicit)
2025-12-23 17:48:46,207 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:48:46,207 - INFO - [cached since 84.65s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:48:46,239 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:48:46,240 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:48:46,241 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:48:46,242 - INFO - [cached since 84.67s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:46,244 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:48:46,244 - INFO - [cached since 84.67s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:48:46,245 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:48:46,246 - INFO - ROLLBACK
2025-12-23 17:49:17,856 - INFO - get_current_user called
2025-12-23 17:49:17,896 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:17,906 - INFO - BEGIN (implicit)
2025-12-23 17:49:17,909 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:17,911 - INFO - [cached since 116.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:17,972 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:17,973 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:49:17,973 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:17,973 - INFO - [cached since 116.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:17,976 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:17,976 - INFO - [cached since 116.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:17,976 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:49:17,978 - INFO - ROLLBACK
2025-12-23 17:49:20,359 - INFO - get_current_user called
2025-12-23 17:49:20,361 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:20,365 - INFO - BEGIN (implicit)
2025-12-23 17:49:20,369 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:20,369 - INFO - [cached since 118.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:20,372 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:20,372 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:49:20,374 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:20,374 - INFO - [cached since 118.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:20,375 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:20,375 - INFO - [cached since 118.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:20,375 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:49:20,376 - INFO - ROLLBACK
2025-12-23 17:49:20,405 - INFO - get_current_user called
2025-12-23 17:49:20,406 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:20,406 - INFO - BEGIN (implicit)
2025-12-23 17:49:20,407 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:20,407 - INFO - [cached since 118.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:20,409 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:20,409 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:20,410 - INFO - [cached since 118.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:20,411 - INFO - ROLLBACK
2025-12-23 17:49:21,082 - INFO - get_current_user called
2025-12-23 17:49:21,083 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:21,083 - INFO - BEGIN (implicit)
2025-12-23 17:49:21,083 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:21,083 - INFO - [cached since 119.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:21,084 - INFO - get_current_user called
2025-12-23 17:49:21,085 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:21,092 - INFO - BEGIN (implicit)
2025-12-23 17:49:21,092 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:21,092 - INFO - [cached since 119.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:21,093 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:21,093 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:21,093 - INFO - [cached since 119.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:21,095 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:21,095 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:49:21,095 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:21,095 - INFO - [cached since 119.5s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:21,096 - INFO - ROLLBACK
2025-12-23 17:49:21,096 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:21,096 - INFO - [cached since 119.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:21,097 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:49:21,097 - INFO - ROLLBACK
2025-12-23 17:49:23,375 - INFO - get_current_user called
2025-12-23 17:49:23,376 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:23,376 - INFO - BEGIN (implicit)
2025-12-23 17:49:23,377 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:23,377 - INFO - [cached since 121.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:23,378 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:23,378 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:49:23,379 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:23,379 - INFO - [cached since 121.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:23,383 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:23,383 - INFO - [cached since 121.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:23,384 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:49:23,385 - INFO - ROLLBACK
2025-12-23 17:49:23,393 - INFO - get_current_user called
2025-12-23 17:49:23,394 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:23,394 - INFO - BEGIN (implicit)
2025-12-23 17:49:23,395 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:23,395 - INFO - [cached since 121.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:23,399 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:23,402 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:23,402 - INFO - [cached since 121.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:23,407 - INFO - ROLLBACK
2025-12-23 17:49:32,453 - INFO - BEGIN (implicit)
2025-12-23 17:49:32,454 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:32,454 - INFO - [cached since 130.9s ago] {'username_1': 'admin'}
2025-12-23 17:49:32,712 - INFO - ROLLBACK
2025-12-23 17:49:32,734 - INFO - get_current_user called
2025-12-23 17:49:32,735 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:32,735 - INFO - BEGIN (implicit)
2025-12-23 17:49:32,735 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:32,735 - INFO - [cached since 131.2s ago] {'username_1': 'admin'}
2025-12-23 17:49:32,738 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:32,739 - INFO - Endpoint /users/me hit for admin
2025-12-23 17:49:32,742 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:32,742 - INFO - [cached since 131.2s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:32,744 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:32,744 - INFO - [cached since 131.2s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:32,745 - INFO - Tenant fetched: Mediboard HQ
2025-12-23 17:49:32,745 - INFO - ROLLBACK
2025-12-23 17:49:32,780 - INFO - get_current_user called
2025-12-23 17:49:32,780 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:32,780 - INFO - BEGIN (implicit)
2025-12-23 17:49:32,780 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:32,780 - INFO - [cached since 131.2s ago] {'username_1': 'admin'}
2025-12-23 17:49:32,781 - INFO - get_current_user called
2025-12-23 17:49:32,781 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:32,781 - INFO - BEGIN (implicit)
2025-12-23 17:49:32,781 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:32,781 - INFO - [cached since 131.2s ago] {'username_1': 'admin'}
2025-12-23 17:49:32,782 - INFO - get_current_user called
2025-12-23 17:49:32,782 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:32,785 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:32,787 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:32,788 - INFO - [cached since 131.2s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:32,790 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:32,791 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:32,791 - INFO - [cached since 131.2s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:32,803 - INFO - SELECT count(tenants.id) AS count_1 
FROM tenants 
WHERE tenants.is_super_admin = false
2025-12-23 17:49:32,803 - INFO - [generated in 0.00019s] {}
2025-12-23 17:49:32,805 - INFO - SELECT tenants.id, tenants.name, tenants.domain, tenants.created_at, tenants.is_super_admin 
FROM tenants ORDER BY tenants.created_at
2025-12-23 17:49:32,805 - INFO - [generated in 0.00009s] {}
2025-12-23 17:49:32,811 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:49:32,811 - INFO - [generated in 0.00036s] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:49:32,813 - INFO - SELECT count(patients.id) AS count_1 
FROM patients
2025-12-23 17:49:32,813 - INFO - [generated in 0.00007s] {}
2025-12-23 17:49:32,813 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:49:32,813 - INFO - [cached since 0.002087s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:49:32,815 - INFO - SELECT count(users.id) AS count_1 
FROM users JOIN tenants ON users.tenant_id = tenants.id 
WHERE tenants.is_super_admin = false AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:49:32,815 - INFO - [generated in 0.00008s] {'roles_1': Jsonb(['admin'])}
2025-12-23 17:49:32,816 - INFO - ROLLBACK
2025-12-23 17:49:32,819 - INFO - ROLLBACK
2025-12-23 17:49:32,864 - INFO - BEGIN (implicit)
2025-12-23 17:49:32,864 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:32,864 - INFO - [cached since 131.3s ago] {'username_1': 'admin'}
2025-12-23 17:49:32,866 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:32,866 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:32,866 - INFO - [cached since 131.3s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:32,867 - INFO - ROLLBACK
2025-12-23 17:49:35,021 - INFO - get_current_user called
2025-12-23 17:49:35,022 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:35,022 - INFO - BEGIN (implicit)
2025-12-23 17:49:35,022 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:35,022 - INFO - [cached since 133.5s ago] {'username_1': 'admin'}
2025-12-23 17:49:35,023 - INFO - get_current_user called
2025-12-23 17:49:35,023 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:35,024 - INFO - BEGIN (implicit)
2025-12-23 17:49:35,024 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:35,024 - INFO - [cached since 133.5s ago] {'username_1': 'admin'}
2025-12-23 17:49:35,025 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:35,025 - INFO - Endpoint /users/me hit for admin
2025-12-23 17:49:35,025 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:35,025 - INFO - [cached since 133.5s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:35,025 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:35,025 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:35,025 - INFO - [cached since 133.5s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:35,027 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:35,027 - INFO - [cached since 133.5s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:35,027 - INFO - SELECT tenants.id, tenants.name, tenants.domain, tenants.created_at, tenants.is_super_admin 
FROM tenants ORDER BY tenants.created_at
2025-12-23 17:49:35,027 - INFO - [cached since 2.222s ago] {}
2025-12-23 17:49:35,027 - INFO - Tenant fetched: Mediboard HQ
2025-12-23 17:49:35,027 - INFO - ROLLBACK
2025-12-23 17:49:35,028 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:49:35,028 - INFO - [cached since 2.217s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:49:35,028 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:49:35,029 - INFO - [cached since 2.217s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:49:35,029 - INFO - ROLLBACK
2025-12-23 17:49:38,950 - INFO - get_current_user called
2025-12-23 17:49:38,953 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:38,958 - INFO - BEGIN (implicit)
2025-12-23 17:49:38,961 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:38,961 - INFO - [cached since 137.4s ago] {'username_1': 'admin'}
2025-12-23 17:49:38,961 - INFO - get_current_user called
2025-12-23 17:49:38,962 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:38,962 - INFO - BEGIN (implicit)
2025-12-23 17:49:38,962 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:38,962 - INFO - [cached since 137.4s ago] {'username_1': 'admin'}
2025-12-23 17:49:38,963 - INFO - get_current_user called
2025-12-23 17:49:38,963 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:38,963 - INFO - BEGIN (implicit)
2025-12-23 17:49:38,963 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:38,963 - INFO - [cached since 137.4s ago] {'username_1': 'admin'}
2025-12-23 17:49:38,964 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:38,964 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:38,964 - INFO - [cached since 137.3s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:38,965 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:38,965 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:38,965 - INFO - [cached since 137.4s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:38,967 - INFO - ROLLBACK
2025-12-23 17:49:38,968 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:38,968 - INFO - Endpoint /users/me hit for admin
2025-12-23 17:49:38,969 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:38,969 - INFO - [cached since 137.4s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:38,969 - INFO - ROLLBACK
2025-12-23 17:49:38,970 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:38,970 - INFO - [cached since 137.4s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:38,970 - INFO - Tenant fetched: Mediboard HQ
2025-12-23 17:49:38,971 - INFO - ROLLBACK
2025-12-23 17:49:45,607 - INFO - get_current_user called
2025-12-23 17:49:45,608 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:45,610 - INFO - BEGIN (implicit)
2025-12-23 17:49:45,611 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:45,611 - INFO - [cached since 144.1s ago] {'username_1': 'admin'}
2025-12-23 17:49:45,612 - INFO - get_current_user called
2025-12-23 17:49:45,612 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:45,613 - INFO - BEGIN (implicit)
2025-12-23 17:49:45,613 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:45,613 - INFO - [cached since 144.1s ago] {'username_1': 'admin'}
2025-12-23 17:49:45,614 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:45,615 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:45,615 - INFO - [cached since 144s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:45,616 - INFO - SELECT tenants.id, tenants.name, tenants.domain, tenants.created_at, tenants.is_super_admin 
FROM tenants ORDER BY tenants.created_at
2025-12-23 17:49:45,616 - INFO - [cached since 12.81s ago] {}
2025-12-23 17:49:45,617 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:45,617 - INFO - Endpoint /users/me hit for admin
2025-12-23 17:49:45,617 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:45,617 - INFO - [cached since 144s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:45,619 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:49:45,619 - INFO - [cached since 12.81s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:49:45,620 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:45,620 - INFO - [cached since 144s ago] {'tenant_id_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:45,620 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR AND users.roles @> %(roles_1)s::JSONB
2025-12-23 17:49:45,620 - INFO - [cached since 12.81s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'roles_1': Jsonb(['admin'])}
2025-12-23 17:49:45,622 - INFO - Tenant fetched: Mediboard HQ
2025-12-23 17:49:45,623 - INFO - ROLLBACK
2025-12-23 17:49:45,624 - INFO - ROLLBACK
2025-12-23 17:49:49,116 - INFO - get_current_user called
2025-12-23 17:49:49,117 - INFO - get_current_user: token decoded, user=admin
2025-12-23 17:49:49,118 - INFO - BEGIN (implicit)
2025-12-23 17:49:49,118 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:49,118 - INFO - [cached since 147.6s ago] {'username_1': 'admin'}
2025-12-23 17:49:49,122 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:49,125 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:49,125 - INFO - [cached since 147.6s ago] {'pk_1': '318f4587-b8b2-41f4-820b-7def3037858b'}
2025-12-23 17:49:49,127 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER
2025-12-23 17:49:49,127 - INFO - [generated in 0.00022s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 1}
2025-12-23 17:49:49,130 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:49,130 - INFO - [cached since 147.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:49,132 - INFO - ROLLBACK
2025-12-23 17:49:49,349 - INFO - get_current_user called
2025-12-23 17:49:49,350 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:49,350 - INFO - BEGIN (implicit)
2025-12-23 17:49:49,351 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:49,351 - INFO - [cached since 147.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:49,354 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:49,354 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:49:49,355 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:49,355 - INFO - [cached since 147.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:49,357 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:49,357 - INFO - [cached since 147.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:49,357 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:49:49,358 - INFO - ROLLBACK
2025-12-23 17:49:49,375 - INFO - get_current_user called
2025-12-23 17:49:49,375 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:49,376 - INFO - BEGIN (implicit)
2025-12-23 17:49:49,376 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:49,377 - INFO - [cached since 147.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:49,377 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:49,378 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:49,378 - INFO - [cached since 147.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:49,380 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:49,380 - INFO - [generated in 0.00022s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:49,384 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:49,384 - INFO - [generated in 0.00032s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:49,387 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:49:49,387 - INFO - [generated in 0.00021s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:49:49,390 - INFO - ROLLBACK
2025-12-23 17:49:50,712 - INFO - get_current_user called
2025-12-23 17:49:50,712 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:50,713 - INFO - BEGIN (implicit)
2025-12-23 17:49:50,713 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:50,713 - INFO - [cached since 149.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:50,714 - INFO - get_current_user called
2025-12-23 17:49:50,714 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:49:50,714 - INFO - BEGIN (implicit)
2025-12-23 17:49:50,714 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:49:50,714 - INFO - [cached since 149.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:49:50,715 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:50,716 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:50,716 - INFO - [cached since 149.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:50,716 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:49:50,716 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:49:50,717 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:49:50,717 - INFO - [cached since 149.1s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:50,718 - INFO - ROLLBACK
2025-12-23 17:49:50,718 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:49:50,718 - INFO - [cached since 149.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:49:50,719 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:49:50,719 - INFO - ROLLBACK
2025-12-23 17:50:02,408 - INFO - get_current_user called
2025-12-23 17:50:02,411 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:02,414 - INFO - BEGIN (implicit)
2025-12-23 17:50:02,418 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:02,419 - INFO - [cached since 160.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:02,421 - INFO - get_current_user called
2025-12-23 17:50:02,421 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:02,421 - INFO - BEGIN (implicit)
2025-12-23 17:50:02,422 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:02,422 - INFO - [cached since 160.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:02,427 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:02,428 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:02,428 - INFO - [cached since 160.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:02,428 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:02,428 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:02,429 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:02,429 - INFO - [cached since 160.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:02,429 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:02,429 - INFO - [cached since 160.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:02,430 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:02,430 - INFO - ROLLBACK
2025-12-23 17:50:02,431 - INFO - ROLLBACK
2025-12-23 17:50:06,987 - INFO - get_current_user called
2025-12-23 17:50:06,987 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:06,988 - INFO - BEGIN (implicit)
2025-12-23 17:50:06,988 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:06,988 - INFO - [cached since 165.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:06,989 - INFO - get_current_user called
2025-12-23 17:50:06,989 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:06,990 - INFO - BEGIN (implicit)
2025-12-23 17:50:06,991 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:06,991 - INFO - [cached since 165.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:06,992 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:06,993 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:06,993 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:06,994 - INFO - [cached since 165.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:06,994 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:06,995 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:06,995 - INFO - [cached since 165.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:06,995 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:06,995 - INFO - [cached since 165.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:06,996 - INFO - ROLLBACK
2025-12-23 17:50:06,997 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:06,997 - INFO - ROLLBACK
2025-12-23 17:50:35,607 - INFO - get_current_user called
2025-12-23 17:50:35,626 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:35,652 - INFO - BEGIN (implicit)
2025-12-23 17:50:35,662 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:35,662 - INFO - [cached since 194.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:35,700 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:35,700 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:35,701 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:35,701 - INFO - [cached since 194.1s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:35,702 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:35,702 - INFO - [cached since 194.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:35,703 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:35,704 - INFO - ROLLBACK
2025-12-23 17:50:35,726 - INFO - get_current_user called
2025-12-23 17:50:35,726 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:35,726 - INFO - BEGIN (implicit)
2025-12-23 17:50:35,727 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:35,727 - INFO - [cached since 194.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:35,728 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:35,728 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:35,728 - INFO - [cached since 194.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:35,729 - INFO - ROLLBACK
2025-12-23 17:50:36,576 - INFO - get_current_user called
2025-12-23 17:50:36,576 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:36,576 - INFO - BEGIN (implicit)
2025-12-23 17:50:36,577 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:36,577 - INFO - [cached since 195s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:36,579 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:36,579 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:36,579 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:36,580 - INFO - [cached since 195s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:36,580 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:36,580 - INFO - [cached since 195s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:36,581 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:36,581 - INFO - ROLLBACK
2025-12-23 17:50:36,592 - INFO - get_current_user called
2025-12-23 17:50:36,592 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:36,592 - INFO - BEGIN (implicit)
2025-12-23 17:50:36,593 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:36,593 - INFO - [cached since 195s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:36,594 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:36,594 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:36,594 - INFO - [cached since 195s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:36,595 - INFO - ROLLBACK
2025-12-23 17:50:36,958 - INFO - get_current_user called
2025-12-23 17:50:36,958 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:37,045 - INFO - BEGIN (implicit)
2025-12-23 17:50:37,045 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:37,045 - INFO - [cached since 195.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:37,046 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:37,046 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:37,046 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:37,046 - INFO - [cached since 195.5s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,046 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:37,046 - INFO - [cached since 195.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,047 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:37,047 - INFO - ROLLBACK
2025-12-23 17:50:37,059 - INFO - get_current_user called
2025-12-23 17:50:37,059 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:37,059 - INFO - BEGIN (implicit)
2025-12-23 17:50:37,059 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:37,059 - INFO - [cached since 195.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:37,060 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:37,060 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:37,060 - INFO - [cached since 195.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,061 - INFO - ROLLBACK
2025-12-23 17:50:37,217 - INFO - get_current_user called
2025-12-23 17:50:37,217 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:37,218 - INFO - BEGIN (implicit)
2025-12-23 17:50:37,218 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:37,218 - INFO - [cached since 195.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:37,218 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:37,218 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:37,219 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:37,219 - INFO - [cached since 195.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,219 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:37,219 - INFO - [cached since 195.6s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,219 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:37,220 - INFO - ROLLBACK
2025-12-23 17:50:37,232 - INFO - get_current_user called
2025-12-23 17:50:37,232 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:37,233 - INFO - BEGIN (implicit)
2025-12-23 17:50:37,233 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:37,233 - INFO - [cached since 195.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:37,234 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:37,234 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:37,234 - INFO - [cached since 195.6s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,235 - INFO - ROLLBACK
2025-12-23 17:50:37,521 - INFO - get_current_user called
2025-12-23 17:50:37,522 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:37,522 - INFO - BEGIN (implicit)
2025-12-23 17:50:37,522 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:37,522 - INFO - [cached since 196s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:37,524 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:37,524 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:37,524 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:37,524 - INFO - [cached since 196s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,525 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:37,525 - INFO - [cached since 196s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,525 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:37,526 - INFO - ROLLBACK
2025-12-23 17:50:37,542 - INFO - get_current_user called
2025-12-23 17:50:37,542 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:37,543 - INFO - BEGIN (implicit)
2025-12-23 17:50:37,543 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:37,543 - INFO - [cached since 196s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:37,544 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:37,545 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:37,545 - INFO - [cached since 195.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,546 - INFO - ROLLBACK
2025-12-23 17:50:37,787 - INFO - get_current_user called
2025-12-23 17:50:37,787 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:37,788 - INFO - BEGIN (implicit)
2025-12-23 17:50:37,788 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:37,788 - INFO - [cached since 196.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:37,790 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:37,790 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:37,791 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:37,791 - INFO - [cached since 196.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,792 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:37,793 - INFO - [cached since 196.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,793 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:37,794 - INFO - ROLLBACK
2025-12-23 17:50:37,804 - INFO - get_current_user called
2025-12-23 17:50:37,805 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:37,806 - INFO - BEGIN (implicit)
2025-12-23 17:50:37,806 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:37,806 - INFO - [cached since 196.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:37,807 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:37,808 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:37,808 - INFO - [cached since 196.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:37,809 - INFO - ROLLBACK
2025-12-23 17:50:38,084 - INFO - get_current_user called
2025-12-23 17:50:38,084 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:38,085 - INFO - BEGIN (implicit)
2025-12-23 17:50:38,085 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:38,085 - INFO - [cached since 196.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:38,086 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:38,087 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:38,087 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:38,087 - INFO - [cached since 196.5s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,088 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:38,088 - INFO - [cached since 196.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,088 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:38,089 - INFO - ROLLBACK
2025-12-23 17:50:38,097 - INFO - get_current_user called
2025-12-23 17:50:38,097 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:38,098 - INFO - BEGIN (implicit)
2025-12-23 17:50:38,098 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:38,098 - INFO - [cached since 196.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:38,099 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:38,100 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:38,100 - INFO - [cached since 196.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,101 - INFO - ROLLBACK
2025-12-23 17:50:38,374 - INFO - get_current_user called
2025-12-23 17:50:38,375 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:38,375 - INFO - BEGIN (implicit)
2025-12-23 17:50:38,375 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:38,376 - INFO - [cached since 196.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:38,377 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:38,377 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:38,378 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:38,378 - INFO - [cached since 196.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,379 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:38,379 - INFO - [cached since 196.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,380 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:38,380 - INFO - ROLLBACK
2025-12-23 17:50:38,390 - INFO - get_current_user called
2025-12-23 17:50:38,390 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:38,391 - INFO - BEGIN (implicit)
2025-12-23 17:50:38,391 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:38,391 - INFO - [cached since 196.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:38,392 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:38,393 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:38,393 - INFO - [cached since 196.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,394 - INFO - ROLLBACK
2025-12-23 17:50:38,628 - INFO - get_current_user called
2025-12-23 17:50:38,628 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:38,628 - INFO - BEGIN (implicit)
2025-12-23 17:50:38,628 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:38,629 - INFO - [cached since 197.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:38,630 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:38,630 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:38,630 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:38,630 - INFO - [cached since 197.1s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,631 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:38,631 - INFO - [cached since 197.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,632 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:38,633 - INFO - ROLLBACK
2025-12-23 17:50:38,642 - INFO - get_current_user called
2025-12-23 17:50:38,642 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:38,643 - INFO - BEGIN (implicit)
2025-12-23 17:50:38,643 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:38,643 - INFO - [cached since 197.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:38,644 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:38,645 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:38,645 - INFO - [cached since 197s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,646 - INFO - ROLLBACK
2025-12-23 17:50:38,812 - INFO - get_current_user called
2025-12-23 17:50:38,813 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:38,813 - INFO - BEGIN (implicit)
2025-12-23 17:50:38,813 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:38,814 - INFO - [cached since 197.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:38,815 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:38,815 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:38,815 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:38,815 - INFO - [cached since 197.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,817 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:38,817 - INFO - [cached since 197.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,817 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:38,818 - INFO - ROLLBACK
2025-12-23 17:50:38,826 - INFO - get_current_user called
2025-12-23 17:50:38,827 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:38,827 - INFO - BEGIN (implicit)
2025-12-23 17:50:38,827 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:38,827 - INFO - [cached since 197.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:38,828 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:38,829 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:38,829 - INFO - [cached since 197.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:38,830 - INFO - ROLLBACK
2025-12-23 17:50:42,221 - INFO - get_current_user called
2025-12-23 17:50:42,222 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:42,223 - INFO - BEGIN (implicit)
2025-12-23 17:50:42,224 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:42,224 - INFO - [cached since 200.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:42,225 - INFO - get_current_user called
2025-12-23 17:50:42,226 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:50:42,226 - INFO - BEGIN (implicit)
2025-12-23 17:50:42,226 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:50:42,226 - INFO - [cached since 200.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:50:42,227 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:42,227 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:42,227 - INFO - [cached since 200.7s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:42,229 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:42,229 - INFO - [cached since 52.85s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:42,229 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:50:42,229 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:50:42,230 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:50:42,230 - INFO - [cached since 200.7s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:42,230 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:42,231 - INFO - [cached since 200.7s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:42,231 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:50:42,232 - INFO - ROLLBACK
2025-12-23 17:50:42,236 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:50:42,236 - INFO - [cached since 52.85s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:50:42,238 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 17:50:42,238 - INFO - [cached since 52.85s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 17:50:42,243 - INFO - ROLLBACK
2025-12-23 17:51:23,055 - INFO - get_current_user called
2025-12-23 17:51:23,057 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:51:23,063 - INFO - BEGIN (implicit)
2025-12-23 17:51:23,065 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:51:23,066 - INFO - [cached since 241.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:51:23,066 - INFO - get_current_user called
2025-12-23 17:51:23,067 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:51:23,067 - INFO - BEGIN (implicit)
2025-12-23 17:51:23,067 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:51:23,067 - INFO - [cached since 241.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:51:23,074 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:51:23,075 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:51:23,077 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:51:23,077 - INFO - [cached since 241.5s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:51:23,077 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:51:23,078 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:51:23,078 - INFO - [cached since 241.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:51:23,078 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:51:23,078 - INFO - [cached since 241.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:51:23,080 - INFO - ROLLBACK
2025-12-23 17:51:23,080 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:51:23,080 - INFO - ROLLBACK
2025-12-23 17:51:33,942 - INFO - get_current_user called
2025-12-23 17:51:33,943 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:51:33,943 - INFO - BEGIN (implicit)
2025-12-23 17:51:33,944 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:51:33,944 - INFO - [cached since 252.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:51:33,944 - INFO - get_current_user called
2025-12-23 17:51:33,945 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:51:33,945 - INFO - BEGIN (implicit)
2025-12-23 17:51:33,945 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:51:33,945 - INFO - [cached since 252.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:51:33,946 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:51:33,946 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:51:33,947 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:51:33,947 - INFO - [cached since 252.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:51:33,947 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:51:33,948 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:51:33,948 - INFO - [cached since 252.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:51:33,948 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:51:33,949 - INFO - [cached since 252.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:51:33,949 - INFO - ROLLBACK
2025-12-23 17:51:33,950 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:51:33,950 - INFO - ROLLBACK
2025-12-23 17:52:04,402 - INFO - get_current_user called
2025-12-23 17:52:04,404 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:52:04,405 - INFO - BEGIN (implicit)
2025-12-23 17:52:04,406 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:52:04,406 - INFO - [cached since 282.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:52:04,409 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:52:04,414 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:52:04,414 - INFO - [cached since 282.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:52:04,682 - INFO - INSERT INTO users (id, tenant_id, username, hashed_password, roles, is_active, created_at) VALUES (%(id)s::VARCHAR, %(tenant_id)s::VARCHAR, %(username)s::VARCHAR, %(hashed_password)s::VARCHAR, %(roles)s::JSONB, %(is_active)s, %(created_at)s::TIMESTAMP WITHOUT TIME ZONE)
2025-12-23 17:52:04,682 - INFO - [generated in 0.00248s] {'id': '54b73b57-52b5-4d82-b48c-a896695eac23', 'tenant_id': '28f9a367-8132-4723-a360-333fbc5db17b', 'username': 'dr_aman', 'hashed_password': '$2b$12$k9dxTBeulqulv0l0hjwBfeqRdwZ1DyLbOTb.WY8Gez5gvKgrMLMc.', 'roles': Jsonb(['doctor', 'admin']), 'is_active': True, 'created_at': datetime.datetime(2025, 12, 23, 12, 22, 4, 682265)}
2025-12-23 17:52:04,692 - INFO - COMMIT
2025-12-23 17:52:04,702 - INFO - get_current_user called
2025-12-23 17:52:04,702 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:52:04,702 - INFO - BEGIN (implicit)
2025-12-23 17:52:04,702 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:52:04,702 - INFO - [cached since 283.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:52:04,704 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:52:04,704 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:52:04,704 - INFO - [cached since 283.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:52:04,705 - INFO - ROLLBACK
2025-12-23 17:52:42,434 - INFO - get_current_user called
2025-12-23 17:52:42,435 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:52:42,437 - INFO - BEGIN (implicit)
2025-12-23 17:52:42,438 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:52:42,438 - INFO - [cached since 320.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:52:42,441 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:52:42,443 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:52:42,443 - INFO - [cached since 320.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:52:42,687 - INFO - INSERT INTO users (id, tenant_id, username, hashed_password, roles, is_active, created_at) VALUES (%(id)s::VARCHAR, %(tenant_id)s::VARCHAR, %(username)s::VARCHAR, %(hashed_password)s::VARCHAR, %(roles)s::JSONB, %(is_active)s, %(created_at)s::TIMESTAMP WITHOUT TIME ZONE)
2025-12-23 17:52:42,688 - INFO - [cached since 38.01s ago] {'id': '138031f1-0586-4147-b18d-c6085529154a', 'tenant_id': '28f9a367-8132-4723-a360-333fbc5db17b', 'username': 'dr_ajay', 'hashed_password': '$2b$12$UdZGoh8B3xz/xCdkcWc9sO86UQgPMLCkHzcZiu0ViohI1kPeZTpQe', 'roles': Jsonb(['doctor', 'front_desk', 'nurse']), 'is_active': True, 'created_at': datetime.datetime(2025, 12, 23, 12, 22, 42, 687937)}
2025-12-23 17:52:42,694 - INFO - COMMIT
2025-12-23 17:52:42,703 - INFO - get_current_user called
2025-12-23 17:52:42,703 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:52:42,703 - INFO - BEGIN (implicit)
2025-12-23 17:52:42,703 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:52:42,703 - INFO - [cached since 321.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:52:42,705 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:52:42,705 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:52:42,705 - INFO - [cached since 321.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:52:42,706 - INFO - ROLLBACK
2025-12-23 17:54:57,602 - INFO - get_current_user called
2025-12-23 17:54:57,612 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:54:57,617 - INFO - BEGIN (implicit)
2025-12-23 17:54:57,619 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:54:57,619 - INFO - [cached since 456.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:54:57,638 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:54:57,643 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:54:57,643 - INFO - [cached since 456.1s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:54:57,650 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 17:54:57,650 - INFO - [generated in 0.00009s] {'pk_1': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:54:57,662 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 17:54:57,662 - INFO - [generated in 0.00009s] {'is_active': False, 'users_id': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:54:57,668 - INFO - COMMIT
2025-12-23 17:55:01,776 - INFO - get_current_user called
2025-12-23 17:55:01,777 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:55:01,778 - INFO - BEGIN (implicit)
2025-12-23 17:55:01,778 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:55:01,778 - INFO - [cached since 460.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:55:01,782 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:55:01,783 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:01,783 - INFO - [cached since 460.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:55:01,784 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:01,784 - INFO - [cached since 4.134s ago] {'pk_1': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:01,786 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 17:55:01,786 - INFO - [cached since 4.124s ago] {'is_active': True, 'users_id': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:01,789 - INFO - COMMIT
2025-12-23 17:55:02,777 - INFO - get_current_user called
2025-12-23 17:55:02,778 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:55:02,778 - INFO - BEGIN (implicit)
2025-12-23 17:55:02,779 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:55:02,779 - INFO - [cached since 461.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:55:02,782 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:55:02,783 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:02,783 - INFO - [cached since 461.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:55:02,784 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:02,784 - INFO - [cached since 5.134s ago] {'pk_1': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:02,785 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 17:55:02,785 - INFO - [cached since 5.123s ago] {'is_active': False, 'users_id': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:02,788 - INFO - COMMIT
2025-12-23 17:55:04,229 - INFO - get_current_user called
2025-12-23 17:55:04,230 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:55:04,230 - INFO - BEGIN (implicit)
2025-12-23 17:55:04,231 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:55:04,231 - INFO - [cached since 462.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:55:04,233 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:55:04,234 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:04,234 - INFO - [cached since 462.7s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:55:04,235 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:04,235 - INFO - [cached since 6.586s ago] {'pk_1': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:04,236 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 17:55:04,237 - INFO - [cached since 6.575s ago] {'is_active': True, 'users_id': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:04,237 - INFO - COMMIT
2025-12-23 17:55:05,461 - INFO - get_current_user called
2025-12-23 17:55:05,462 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:55:05,463 - INFO - BEGIN (implicit)
2025-12-23 17:55:05,464 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:55:05,464 - INFO - [cached since 463.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:55:05,466 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:55:05,467 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:05,467 - INFO - [cached since 463.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:55:05,468 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:05,468 - INFO - [cached since 7.819s ago] {'pk_1': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:05,469 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 17:55:05,469 - INFO - [cached since 7.807s ago] {'is_active': False, 'users_id': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:05,471 - INFO - COMMIT
2025-12-23 17:55:07,109 - INFO - get_current_user called
2025-12-23 17:55:07,110 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:55:07,111 - INFO - BEGIN (implicit)
2025-12-23 17:55:07,112 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:55:07,112 - INFO - [cached since 465.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:55:07,114 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:55:07,115 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:07,115 - INFO - [cached since 465.5s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:55:07,116 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 17:55:07,116 - INFO - [cached since 9.467s ago] {'pk_1': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:07,117 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 17:55:07,117 - INFO - [cached since 9.456s ago] {'is_active': True, 'users_id': 'c925af4f-bb05-42be-a9c2-669d47210bd6'}
2025-12-23 17:55:07,118 - INFO - COMMIT
2025-12-23 17:58:18,791 - INFO - get_current_user called
2025-12-23 17:58:18,843 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:58:18,863 - INFO - BEGIN (implicit)
2025-12-23 17:58:18,875 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:58:18,876 - INFO - [cached since 657.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:58:18,974 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:58:18,978 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:58:18,978 - INFO - [cached since 657.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:58:18,992 - INFO - ROLLBACK
2025-12-23 17:58:20,845 - INFO - get_current_user called
2025-12-23 17:58:20,846 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:58:20,850 - INFO - BEGIN (implicit)
2025-12-23 17:58:20,852 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:58:20,852 - INFO - [cached since 659.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:58:20,855 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:58:20,855 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:58:20,858 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:58:20,858 - INFO - [cached since 659.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:58:20,860 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:58:20,860 - INFO - [cached since 659.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:58:20,861 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:58:20,861 - INFO - ROLLBACK
2025-12-23 17:58:20,885 - INFO - get_current_user called
2025-12-23 17:58:20,885 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:58:20,886 - INFO - BEGIN (implicit)
2025-12-23 17:58:20,886 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:58:20,886 - INFO - [cached since 659.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:58:20,889 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:58:20,889 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:58:20,889 - INFO - [cached since 659.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:58:20,891 - INFO - ROLLBACK
2025-12-23 17:58:22,535 - INFO - get_current_user called
2025-12-23 17:58:22,536 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:58:22,536 - INFO - BEGIN (implicit)
2025-12-23 17:58:22,537 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:58:22,537 - INFO - [cached since 661s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:58:22,539 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:58:22,539 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 17:58:22,540 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:58:22,540 - INFO - [cached since 661s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:58:22,541 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:58:22,541 - INFO - [cached since 661s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:58:22,544 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 17:58:22,545 - INFO - ROLLBACK
2025-12-23 17:58:22,558 - INFO - get_current_user called
2025-12-23 17:58:22,558 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:58:22,558 - INFO - BEGIN (implicit)
2025-12-23 17:58:22,559 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:58:22,559 - INFO - [cached since 661s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:58:22,560 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:58:22,561 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:58:22,561 - INFO - [cached since 660.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:58:22,562 - INFO - ROLLBACK
2025-12-23 17:58:45,659 - INFO - get_current_user called
2025-12-23 17:58:45,662 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:58:45,667 - INFO - BEGIN (implicit)
2025-12-23 17:58:45,669 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:58:45,670 - INFO - [cached since 684.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:58:45,677 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:58:45,684 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:58:45,684 - INFO - [cached since 684.1s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:58:45,687 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 17:58:45,687 - INFO - [cached since 228s ago] {'pk_1': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 17:58:45,690 - INFO - UPDATE users SET roles=%(roles)s::JSONB WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 17:58:45,690 - INFO - [generated in 0.00013s] {'roles': Jsonb(['doctor', 'front_desk']), 'users_id': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 17:58:45,696 - INFO - COMMIT
2025-12-23 17:58:45,702 - INFO - get_current_user called
2025-12-23 17:58:45,702 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:58:45,703 - INFO - BEGIN (implicit)
2025-12-23 17:58:45,703 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:58:45,703 - INFO - [cached since 684.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:58:45,705 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:58:45,705 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:58:45,706 - INFO - [cached since 684.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:58:45,707 - INFO - ROLLBACK
2025-12-23 17:59:06,111 - INFO - get_current_user called
2025-12-23 17:59:06,113 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:59:06,120 - INFO - BEGIN (implicit)
2025-12-23 17:59:06,122 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:59:06,122 - INFO - [cached since 704.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:59:06,127 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:59:06,129 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 17:59:06,129 - INFO - [cached since 704.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:59:06,130 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 17:59:06,130 - INFO - [cached since 248.5s ago] {'pk_1': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 17:59:06,134 - INFO - UPDATE users SET roles=%(roles)s::JSONB WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 17:59:06,134 - INFO - [cached since 20.44s ago] {'roles': Jsonb(['doctor']), 'users_id': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 17:59:06,136 - INFO - COMMIT
2025-12-23 17:59:06,142 - INFO - get_current_user called
2025-12-23 17:59:06,142 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 17:59:06,142 - INFO - BEGIN (implicit)
2025-12-23 17:59:06,143 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 17:59:06,143 - INFO - [cached since 704.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 17:59:06,145 - INFO - get_current_user: db fetch done, found=True
2025-12-23 17:59:06,146 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 17:59:06,146 - INFO - [cached since 704.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 17:59:06,147 - INFO - ROLLBACK
2025-12-23 18:00:00,875 - INFO - get_current_user called
2025-12-23 18:00:00,889 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:00,892 - INFO - BEGIN (implicit)
2025-12-23 18:00:00,895 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:00,896 - INFO - [cached since 759.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:00,900 - INFO - get_current_user called
2025-12-23 18:00:00,901 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:00,901 - INFO - BEGIN (implicit)
2025-12-23 18:00:00,901 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:00,901 - INFO - [cached since 759.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:00,919 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:00,920 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:00,920 - INFO - [cached since 759.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:00,920 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:00,920 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:00:00,921 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:00,921 - INFO - [cached since 759.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:00,922 - INFO - ROLLBACK
2025-12-23 18:00:00,922 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:00,922 - INFO - [cached since 759.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:00,924 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:00:00,924 - INFO - ROLLBACK
2025-12-23 18:00:22,473 - INFO - get_current_user called
2025-12-23 18:00:22,478 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:22,482 - INFO - BEGIN (implicit)
2025-12-23 18:00:22,487 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:22,487 - INFO - [cached since 780.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:22,490 - INFO - get_current_user called
2025-12-23 18:00:22,491 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:22,491 - INFO - BEGIN (implicit)
2025-12-23 18:00:22,491 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:22,491 - INFO - [cached since 780.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:22,502 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:22,503 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:22,503 - INFO - [cached since 780.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:22,504 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:22,504 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:00:22,505 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:22,505 - INFO - [cached since 780.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:22,511 - INFO - ROLLBACK
2025-12-23 18:00:22,516 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:22,516 - INFO - [cached since 780.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:22,517 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:00:22,517 - INFO - ROLLBACK
2025-12-23 18:00:29,944 - INFO - get_current_user called
2025-12-23 18:00:29,946 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:29,953 - INFO - BEGIN (implicit)
2025-12-23 18:00:29,957 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:29,958 - INFO - [cached since 788.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:29,959 - INFO - get_current_user called
2025-12-23 18:00:29,959 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:29,960 - INFO - BEGIN (implicit)
2025-12-23 18:00:29,960 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:29,961 - INFO - [cached since 788.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:29,968 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:29,971 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:29,971 - INFO - [cached since 788.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:29,974 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:29,974 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:00:29,974 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:29,975 - INFO - [cached since 788.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:29,985 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:29,985 - INFO - [cached since 640.6s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:29,986 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:29,986 - INFO - [cached since 788.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:29,987 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:00:29,988 - INFO - ROLLBACK
2025-12-23 18:00:29,991 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:29,991 - INFO - [cached since 640.6s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:29,994 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:00:29,994 - INFO - [cached since 640.6s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:00:29,996 - INFO - ROLLBACK
2025-12-23 18:00:31,047 - INFO - get_current_user called
2025-12-23 18:00:31,047 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:31,048 - INFO - BEGIN (implicit)
2025-12-23 18:00:31,048 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:31,048 - INFO - [cached since 789.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:31,049 - INFO - get_current_user called
2025-12-23 18:00:31,049 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:31,049 - INFO - BEGIN (implicit)
2025-12-23 18:00:31,050 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:31,050 - INFO - [cached since 789.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:31,050 - INFO - get_current_user called
2025-12-23 18:00:31,050 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:31,051 - INFO - BEGIN (implicit)
2025-12-23 18:00:31,051 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:31,051 - INFO - [cached since 789.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:31,052 - INFO - get_current_user called
2025-12-23 18:00:31,052 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:31,065 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:31,065 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:31,065 - INFO - [cached since 789.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:31,066 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:31,073 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 18:00:31,073 - INFO - [cached since 786.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 18:00:31,073 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:31,091 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 18:00:31,091 - INFO - [generated in 0.00019s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 18:00:31,098 - INFO - ROLLBACK
2025-12-23 18:00:31,098 - INFO - ROLLBACK
2025-12-23 18:00:31,104 - INFO - ROLLBACK
2025-12-23 18:00:31,198 - INFO - BEGIN (implicit)
2025-12-23 18:00:31,199 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:31,199 - INFO - [cached since 789.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:31,205 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:31,205 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:00:31,206 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:31,206 - INFO - [cached since 789.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:31,207 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:31,207 - INFO - [cached since 789.6s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:31,207 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:00:31,208 - INFO - ROLLBACK
2025-12-23 18:00:31,860 - INFO - get_current_user called
2025-12-23 18:00:31,860 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:31,860 - INFO - BEGIN (implicit)
2025-12-23 18:00:31,860 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:31,860 - INFO - [cached since 790.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:31,861 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:31,861 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:00:31,862 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:31,862 - INFO - [cached since 790.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:31,862 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:31,862 - INFO - [cached since 790.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:31,863 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:00:31,863 - INFO - ROLLBACK
2025-12-23 18:00:32,171 - INFO - get_current_user called
2025-12-23 18:00:32,171 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:32,172 - INFO - BEGIN (implicit)
2025-12-23 18:00:32,172 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:32,172 - INFO - [cached since 790.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:32,173 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:32,174 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 18:00:32,174 - INFO - [cached since 788s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 18:00:32,175 - INFO - ROLLBACK
2025-12-23 18:00:32,792 - INFO - get_current_user called
2025-12-23 18:00:32,793 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:32,797 - INFO - BEGIN (implicit)
2025-12-23 18:00:32,798 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:32,799 - INFO - [cached since 791.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:32,801 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:32,802 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:00:32,803 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:32,803 - INFO - [cached since 791.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:32,804 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:32,804 - INFO - [cached since 791.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:32,804 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:00:32,805 - INFO - ROLLBACK
2025-12-23 18:00:33,381 - INFO - get_current_user called
2025-12-23 18:00:33,381 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:33,381 - INFO - BEGIN (implicit)
2025-12-23 18:00:33,381 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:33,381 - INFO - [cached since 791.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:33,382 - INFO - get_current_user called
2025-12-23 18:00:33,382 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:33,382 - INFO - BEGIN (implicit)
2025-12-23 18:00:33,382 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:33,382 - INFO - [cached since 791.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:33,383 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:33,383 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:33,383 - INFO - [cached since 791.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:33,384 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:33,384 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:00:33,384 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:33,384 - INFO - [cached since 791.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:33,385 - INFO - ROLLBACK
2025-12-23 18:00:33,385 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:33,385 - INFO - [cached since 791.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:33,385 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:00:33,386 - INFO - ROLLBACK
2025-12-23 18:00:34,083 - INFO - get_current_user called
2025-12-23 18:00:34,084 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:34,084 - INFO - BEGIN (implicit)
2025-12-23 18:00:34,085 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:34,085 - INFO - [cached since 792.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:34,085 - INFO - get_current_user called
2025-12-23 18:00:34,086 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:34,086 - INFO - BEGIN (implicit)
2025-12-23 18:00:34,086 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:34,086 - INFO - [cached since 792.5s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:34,088 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:34,088 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:34,088 - INFO - [cached since 792.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:34,089 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:34,089 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:00:34,089 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:34,089 - INFO - [cached since 792.5s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:34,090 - INFO - ROLLBACK
2025-12-23 18:00:34,090 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:34,091 - INFO - [cached since 792.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:34,091 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:00:34,092 - INFO - ROLLBACK
2025-12-23 18:00:35,169 - INFO - get_current_user called
2025-12-23 18:00:35,176 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:35,179 - INFO - BEGIN (implicit)
2025-12-23 18:00:35,183 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:35,184 - INFO - [cached since 793.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:35,186 - INFO - get_current_user called
2025-12-23 18:00:35,186 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:00:35,187 - INFO - BEGIN (implicit)
2025-12-23 18:00:35,187 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:00:35,187 - INFO - [cached since 793.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:00:35,192 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:35,193 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:35,193 - INFO - [cached since 793.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:35,193 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:00:35,194 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:00:35,194 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:00:35,194 - INFO - [cached since 793.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:35,195 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:35,195 - INFO - [cached since 645.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:35,196 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:35,196 - INFO - [cached since 793.6s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:35,197 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:00:35,198 - INFO - ROLLBACK
2025-12-23 18:00:35,199 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:00:35,199 - INFO - [cached since 645.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:00:35,201 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:00:35,201 - INFO - [cached since 645.8s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:00:35,204 - INFO - ROLLBACK
2025-12-23 18:01:22,459 - INFO - get_current_user called
2025-12-23 18:01:22,472 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:01:22,477 - INFO - BEGIN (implicit)
2025-12-23 18:01:22,480 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:01:22,480 - INFO - [cached since 840.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:01:22,504 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:01:22,504 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:01:22,504 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:22,505 - INFO - [cached since 840.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:22,506 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:01:22,506 - INFO - [cached since 840.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:22,507 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:01:22,508 - INFO - ROLLBACK
2025-12-23 18:01:22,532 - INFO - get_current_user called
2025-12-23 18:01:22,533 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:01:22,533 - INFO - BEGIN (implicit)
2025-12-23 18:01:22,534 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:01:22,534 - INFO - [cached since 841s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:01:22,539 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:01:22,540 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:22,540 - INFO - [cached since 841s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:22,542 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:01:22,542 - INFO - [cached since 693.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:22,543 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:01:22,543 - INFO - [cached since 693.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:22,545 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:01:22,545 - INFO - [cached since 693.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:01:22,548 - INFO - ROLLBACK
2025-12-23 18:01:23,486 - INFO - get_current_user called
2025-12-23 18:01:23,487 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:01:23,488 - INFO - BEGIN (implicit)
2025-12-23 18:01:23,489 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:01:23,489 - INFO - [cached since 841.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:01:23,491 - INFO - get_current_user called
2025-12-23 18:01:23,492 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:01:23,492 - INFO - BEGIN (implicit)
2025-12-23 18:01:23,492 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:01:23,492 - INFO - [cached since 841.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:01:23,494 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:01:23,494 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:01:23,494 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:23,494 - INFO - [cached since 841.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:23,494 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:01:23,495 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:01:23,495 - INFO - [cached since 841.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:23,495 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:01:23,495 - INFO - [cached since 841.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:23,496 - INFO - ROLLBACK
2025-12-23 18:01:23,497 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:01:23,497 - INFO - ROLLBACK
2025-12-23 18:01:42,170 - INFO - get_current_user called
2025-12-23 18:01:42,172 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:01:42,173 - INFO - BEGIN (implicit)
2025-12-23 18:01:42,174 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:01:42,174 - INFO - [cached since 860.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:01:42,177 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:01:42,185 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:42,185 - INFO - [cached since 860.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:42,187 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:42,187 - INFO - [cached since 404.5s ago] {'pk_1': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:01:42,191 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 18:01:42,191 - INFO - [cached since 404.5s ago] {'is_active': False, 'users_id': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:01:42,198 - INFO - COMMIT
2025-12-23 18:01:42,925 - INFO - get_current_user called
2025-12-23 18:01:42,926 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:01:42,926 - INFO - BEGIN (implicit)
2025-12-23 18:01:42,927 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:01:42,927 - INFO - [cached since 861.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:01:42,928 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:01:42,929 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:42,929 - INFO - [cached since 861.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:42,930 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:42,930 - INFO - [cached since 405.3s ago] {'pk_1': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:01:42,931 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 18:01:42,931 - INFO - [cached since 405.3s ago] {'is_active': True, 'users_id': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:01:42,935 - INFO - COMMIT
2025-12-23 18:01:43,460 - INFO - get_current_user called
2025-12-23 18:01:43,461 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:01:43,461 - INFO - BEGIN (implicit)
2025-12-23 18:01:43,462 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:01:43,462 - INFO - [cached since 861.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:01:43,464 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:01:43,464 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:43,465 - INFO - [cached since 861.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:43,466 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:43,466 - INFO - [cached since 405.8s ago] {'pk_1': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:01:43,467 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 18:01:43,467 - INFO - [cached since 405.8s ago] {'is_active': False, 'users_id': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:01:43,469 - INFO - COMMIT
2025-12-23 18:01:45,193 - INFO - get_current_user called
2025-12-23 18:01:45,194 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:01:45,194 - INFO - BEGIN (implicit)
2025-12-23 18:01:45,195 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:01:45,195 - INFO - [cached since 863.6s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:01:45,197 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:01:45,198 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:45,199 - INFO - [cached since 863.6s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:01:45,200 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:01:45,200 - INFO - [cached since 407.5s ago] {'pk_1': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:01:45,201 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 18:01:45,201 - INFO - [cached since 407.5s ago] {'is_active': True, 'users_id': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:01:45,204 - INFO - COMMIT
2025-12-23 18:02:27,730 - INFO - get_current_user called
2025-12-23 18:02:27,753 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:02:27,786 - INFO - BEGIN (implicit)
2025-12-23 18:02:27,797 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:02:27,798 - INFO - [cached since 906.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:02:27,804 - INFO - get_current_user called
2025-12-23 18:02:27,804 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:02:27,804 - INFO - BEGIN (implicit)
2025-12-23 18:02:27,804 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:02:27,804 - INFO - [cached since 906.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:02:27,837 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:02:27,837 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:02:27,841 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:02:27,841 - INFO - [cached since 906.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:02:27,841 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:02:27,841 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:02:27,841 - INFO - [cached since 906.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:02:27,847 - INFO - ROLLBACK
2025-12-23 18:02:27,847 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:02:27,847 - INFO - [cached since 906.3s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:02:27,848 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:02:27,848 - INFO - ROLLBACK
2025-12-23 18:02:28,810 - INFO - get_current_user called
2025-12-23 18:02:28,810 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:02:28,811 - INFO - BEGIN (implicit)
2025-12-23 18:02:28,811 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:02:28,811 - INFO - [cached since 907.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:02:28,811 - INFO - get_current_user called
2025-12-23 18:02:28,812 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:02:28,812 - INFO - BEGIN (implicit)
2025-12-23 18:02:28,812 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:02:28,812 - INFO - [cached since 907.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:02:28,815 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:02:28,815 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:02:28,816 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:02:28,816 - INFO - [cached since 907.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:02:28,817 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:02:28,817 - INFO - [cached since 907.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:02:28,817 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:02:28,818 - INFO - ROLLBACK
2025-12-23 18:02:28,818 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:02:28,819 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:02:28,819 - INFO - [cached since 907.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:02:28,821 - INFO - ROLLBACK
2025-12-23 18:02:36,510 - INFO - get_current_user called
2025-12-23 18:02:36,510 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:02:36,511 - INFO - BEGIN (implicit)
2025-12-23 18:02:36,512 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:02:36,512 - INFO - [cached since 914.9s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:02:36,513 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:02:36,517 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:02:36,517 - INFO - [cached since 914.9s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:02:36,518 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:02:36,518 - INFO - [cached since 458.9s ago] {'pk_1': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:02:36,520 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 18:02:36,520 - INFO - [cached since 458.9s ago] {'is_active': False, 'users_id': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:02:36,524 - INFO - COMMIT
2025-12-23 18:02:43,884 - INFO - select pg_catalog.version()
2025-12-23 18:02:43,884 - INFO - [raw sql] {}
2025-12-23 18:02:43,887 - INFO - select current_schema()
2025-12-23 18:02:43,887 - INFO - [raw sql] {}
2025-12-23 18:02:43,888 - INFO - show standard_conforming_strings
2025-12-23 18:02:43,888 - INFO - [raw sql] {}
2025-12-23 18:02:43,896 - INFO - BEGIN (implicit)
2025-12-23 18:02:43,898 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:43,898 - INFO - [generated in 0.00012s] {'table_name': 'tenants', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:43,904 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:43,907 - INFO - [cached since 0.009282s ago] {'table_name': 'tenant_settings', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:43,907 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:43,907 - INFO - [cached since 0.00974s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:43,908 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:43,908 - INFO - [cached since 0.01008s ago] {'table_name': 'patients', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:43,908 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:43,908 - INFO - [cached since 0.01038s ago] {'table_name': 'clinical_records', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:43,908 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:43,908 - INFO - [cached since 0.01067s ago] {'table_name': 'appointments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:43,909 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:43,909 - INFO - [cached since 0.01126s ago] {'table_name': 'attachments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:43,909 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:43,909 - INFO - [cached since 0.01151s ago] {'table_name': 'prescriptions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:43,909 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:43,909 - INFO - [cached since 0.01176s ago] {'table_name': 'invoices', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:43,910 - INFO - COMMIT
2025-12-23 18:02:44,529 - INFO - select pg_catalog.version()
2025-12-23 18:02:44,530 - INFO - [raw sql] {}
2025-12-23 18:02:44,530 - INFO - select current_schema()
2025-12-23 18:02:44,530 - INFO - [raw sql] {}
2025-12-23 18:02:44,531 - INFO - show standard_conforming_strings
2025-12-23 18:02:44,531 - INFO - [raw sql] {}
2025-12-23 18:02:44,532 - INFO - BEGIN (implicit)
2025-12-23 18:02:44,534 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:44,534 - INFO - [generated in 0.00010s] {'table_name': 'tenants', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:44,535 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:44,535 - INFO - [cached since 0.001223s ago] {'table_name': 'tenant_settings', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:44,535 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:44,535 - INFO - [cached since 0.001609s ago] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:44,536 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:44,536 - INFO - [cached since 0.001974s ago] {'table_name': 'patients', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:44,536 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:44,536 - INFO - [cached since 0.002279s ago] {'table_name': 'clinical_records', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:44,536 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:44,536 - INFO - [cached since 0.002577s ago] {'table_name': 'appointments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:44,537 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:44,537 - INFO - [cached since 0.002982s ago] {'table_name': 'attachments', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:44,537 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:44,537 - INFO - [cached since 0.003254s ago] {'table_name': 'prescriptions', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:44,537 - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s::VARCHAR, %(param_2)s::VARCHAR, %(param_3)s::VARCHAR, %(param_4)s::VARCHAR, %(param_5)s::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s::VARCHAR
2025-12-23 18:02:44,537 - INFO - [cached since 0.003511s ago] {'table_name': 'invoices', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-12-23 18:02:44,538 - INFO - COMMIT
2025-12-23 18:02:52,005 - INFO - get_current_user called
2025-12-23 18:02:52,022 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:02:52,023 - INFO - BEGIN (implicit)
2025-12-23 18:02:52,037 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:02:52,037 - INFO - [generated in 0.00020s] {'username_1': 'apollo_admin'}
2025-12-23 18:02:52,043 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:02:52,044 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:02:52,044 - INFO - [generated in 0.00012s] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:02:52,047 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:02:52,047 - INFO - [generated in 0.00012s] {'pk_1': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:02:52,049 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 18:02:52,049 - INFO - [generated in 0.00011s] {'is_active': True, 'users_id': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:02:52,051 - INFO - COMMIT
2025-12-23 18:02:52,659 - INFO - get_current_user called
2025-12-23 18:02:52,660 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:02:52,661 - INFO - BEGIN (implicit)
2025-12-23 18:02:52,661 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:02:52,661 - INFO - [cached since 0.6247s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:02:52,663 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:02:52,664 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:02:52,664 - INFO - [cached since 0.6202s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:02:52,666 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:02:52,666 - INFO - [cached since 0.6187s ago] {'pk_1': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:02:52,667 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 18:02:52,667 - INFO - [cached since 0.6182s ago] {'is_active': False, 'users_id': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:02:52,668 - INFO - COMMIT
2025-12-23 18:09:10,677 - INFO - get_current_user called
2025-12-23 18:09:10,709 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:10,739 - INFO - BEGIN (implicit)
2025-12-23 18:09:10,753 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:10,754 - INFO - [cached since 378.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:10,816 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:10,817 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:09:10,819 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:10,819 - INFO - [cached since 378.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:10,829 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:10,829 - INFO - [generated in 0.00011s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:10,840 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:09:10,842 - INFO - ROLLBACK
2025-12-23 18:09:11,995 - INFO - get_current_user called
2025-12-23 18:09:11,995 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:11,996 - INFO - BEGIN (implicit)
2025-12-23 18:09:11,996 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:11,996 - INFO - [cached since 380s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:11,996 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:11,996 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:09:11,997 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:11,997 - INFO - [cached since 380s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:11,997 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:11,997 - INFO - [cached since 1.168s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:11,998 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:09:11,998 - INFO - ROLLBACK
2025-12-23 18:09:11,999 - INFO - get_current_user called
2025-12-23 18:09:11,999 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:11,999 - INFO - BEGIN (implicit)
2025-12-23 18:09:11,999 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:11,999 - INFO - [cached since 380s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:12,000 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:12,000 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:09:12,000 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:12,000 - INFO - [cached since 380s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,000 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:12,000 - INFO - [cached since 1.171s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,001 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:09:12,001 - INFO - ROLLBACK
2025-12-23 18:09:12,114 - INFO - get_current_user called
2025-12-23 18:09:12,114 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:12,115 - INFO - BEGIN (implicit)
2025-12-23 18:09:12,115 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:12,115 - INFO - [cached since 380.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:12,116 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:12,117 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:12,117 - INFO - [cached since 380.1s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,135 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:12,135 - INFO - [generated in 0.00015s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,145 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:12,145 - INFO - [generated in 0.00010s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,146 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:09:12,146 - INFO - [generated in 0.00008s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:09:12,152 - INFO - ROLLBACK
2025-12-23 18:09:12,153 - INFO - get_current_user called
2025-12-23 18:09:12,153 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:12,153 - INFO - BEGIN (implicit)
2025-12-23 18:09:12,153 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:12,153 - INFO - [cached since 380.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:12,154 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:12,154 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:12,154 - INFO - [cached since 380.1s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,154 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:12,155 - INFO - [cached since 0.01977s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,155 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:12,155 - INFO - [cached since 0.009959s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,155 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:09:12,155 - INFO - [cached since 0.009341s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:09:12,156 - INFO - ROLLBACK
2025-12-23 18:09:12,157 - INFO - get_current_user called
2025-12-23 18:09:12,157 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:12,157 - INFO - BEGIN (implicit)
2025-12-23 18:09:12,157 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:12,157 - INFO - [cached since 380.1s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:12,158 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:12,158 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:12,158 - INFO - [cached since 380.1s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,158 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:12,158 - INFO - [cached since 0.02354s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,159 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:12,159 - INFO - [cached since 0.01373s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:12,159 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:09:12,159 - INFO - [cached since 0.01295s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:09:12,160 - INFO - ROLLBACK
2025-12-23 18:09:22,423 - INFO - get_current_user called
2025-12-23 18:09:22,426 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:22,430 - INFO - BEGIN (implicit)
2025-12-23 18:09:22,432 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:22,432 - INFO - [cached since 390.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:22,438 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:22,438 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:09:22,440 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:22,440 - INFO - [cached since 390.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,441 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:22,441 - INFO - [cached since 11.61s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,441 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:09:22,443 - INFO - ROLLBACK
2025-12-23 18:09:22,443 - INFO - get_current_user called
2025-12-23 18:09:22,443 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:22,444 - INFO - BEGIN (implicit)
2025-12-23 18:09:22,444 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:22,444 - INFO - [cached since 390.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:22,444 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:22,445 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:09:22,445 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:22,445 - INFO - [cached since 390.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,445 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:22,445 - INFO - [cached since 11.62s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,446 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:09:22,446 - INFO - ROLLBACK
2025-12-23 18:09:22,453 - INFO - get_current_user called
2025-12-23 18:09:22,453 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:22,453 - INFO - BEGIN (implicit)
2025-12-23 18:09:22,453 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:22,454 - INFO - [cached since 390.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:22,454 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:22,454 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:22,454 - INFO - [cached since 390.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,455 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:22,455 - INFO - [cached since 10.32s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,456 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:22,456 - INFO - [cached since 10.31s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,457 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:09:22,457 - INFO - [cached since 10.31s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:09:22,457 - INFO - ROLLBACK
2025-12-23 18:09:22,458 - INFO - get_current_user called
2025-12-23 18:09:22,458 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:22,458 - INFO - BEGIN (implicit)
2025-12-23 18:09:22,458 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:22,458 - INFO - [cached since 390.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:22,458 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:22,459 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:22,459 - INFO - [cached since 390.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,459 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:22,459 - INFO - [cached since 10.32s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,460 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:22,460 - INFO - [cached since 10.31s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,460 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:09:22,461 - INFO - [cached since 10.31s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:09:22,461 - INFO - ROLLBACK
2025-12-23 18:09:22,462 - INFO - get_current_user called
2025-12-23 18:09:22,462 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:22,462 - INFO - BEGIN (implicit)
2025-12-23 18:09:22,462 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:22,462 - INFO - [cached since 390.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:22,462 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:22,463 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:22,463 - INFO - [cached since 390.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,463 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:22,463 - INFO - [cached since 10.33s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,464 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:22,464 - INFO - [cached since 10.32s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:22,464 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:09:22,464 - INFO - [cached since 10.32s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:09:22,465 - INFO - ROLLBACK
2025-12-23 18:09:24,011 - INFO - get_current_user called
2025-12-23 18:09:24,012 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:24,012 - INFO - BEGIN (implicit)
2025-12-23 18:09:24,013 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:24,013 - INFO - [cached since 392s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:24,017 - INFO - get_current_user called
2025-12-23 18:09:24,017 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:24,026 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:24,027 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:09:24,028 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:24,028 - INFO - [cached since 392s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:24,032 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:24,033 - INFO - [cached since 13.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:24,053 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:09:24,054 - INFO - ROLLBACK
2025-12-23 18:09:24,214 - INFO - BEGIN (implicit)
2025-12-23 18:09:24,216 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:24,216 - INFO - [cached since 392.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:24,220 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:24,222 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:24,222 - INFO - [generated in 0.00026s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:24,227 - INFO - ROLLBACK
2025-12-23 18:09:24,228 - INFO - get_current_user called
2025-12-23 18:09:24,228 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:24,228 - INFO - BEGIN (implicit)
2025-12-23 18:09:24,229 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:24,229 - INFO - [cached since 392.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:24,229 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:24,230 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:24,230 - INFO - [cached since 0.007713s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:24,231 - INFO - ROLLBACK
2025-12-23 18:09:28,344 - INFO - get_current_user called
2025-12-23 18:09:28,345 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:28,346 - INFO - BEGIN (implicit)
2025-12-23 18:09:28,347 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:28,347 - INFO - [cached since 396.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:28,349 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:28,356 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:28,356 - INFO - [cached since 396.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:28,360 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:28,360 - INFO - [cached since 396.3s ago] {'pk_1': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:09:28,362 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 18:09:28,362 - INFO - [cached since 396.3s ago] {'is_active': True, 'users_id': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:09:28,368 - INFO - COMMIT
2025-12-23 18:09:29,054 - INFO - get_current_user called
2025-12-23 18:09:29,054 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:29,055 - INFO - BEGIN (implicit)
2025-12-23 18:09:29,056 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:29,056 - INFO - [cached since 397s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:29,058 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:29,059 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:29,059 - INFO - [cached since 397s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:29,061 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:29,061 - INFO - [cached since 397s ago] {'pk_1': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:09:29,062 - INFO - UPDATE users SET is_active=%(is_active)s WHERE users.id = %(users_id)s::VARCHAR
2025-12-23 18:09:29,062 - INFO - [cached since 397s ago] {'is_active': False, 'users_id': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:09:29,064 - INFO - COMMIT
2025-12-23 18:09:36,439 - INFO - get_current_user called
2025-12-23 18:09:36,442 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:36,451 - INFO - BEGIN (implicit)
2025-12-23 18:09:36,453 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:36,454 - INFO - [cached since 404.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:36,464 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:36,466 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:36,466 - INFO - [cached since 404.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:36,467 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:36,467 - INFO - [cached since 404.4s ago] {'pk_1': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:09:36,474 - INFO - DELETE FROM users WHERE users.id = %(id)s::VARCHAR
2025-12-23 18:09:36,474 - INFO - [generated in 0.00011s] {'id': '54b73b57-52b5-4d82-b48c-a896695eac23'}
2025-12-23 18:09:36,482 - INFO - COMMIT
2025-12-23 18:09:42,750 - INFO - get_current_user called
2025-12-23 18:09:42,753 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:42,760 - INFO - BEGIN (implicit)
2025-12-23 18:09:42,762 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:42,762 - INFO - [cached since 410.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:42,768 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:42,769 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:42,769 - INFO - [cached since 410.7s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:42,769 - INFO - SELECT users.id AS users_id, users.tenant_id AS users_tenant_id, users.username AS users_username, users.hashed_password AS users_hashed_password, users.roles AS users_roles, users.is_active AS users_is_active, users.created_at AS users_created_at 
FROM users 
WHERE users.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:42,769 - INFO - [cached since 410.7s ago] {'pk_1': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:09:42,770 - INFO - DELETE FROM users WHERE users.id = %(id)s::VARCHAR
2025-12-23 18:09:42,770 - INFO - [cached since 6.297s ago] {'id': '138031f1-0586-4147-b18d-c6085529154a'}
2025-12-23 18:09:42,772 - INFO - COMMIT
2025-12-23 18:09:45,408 - INFO - get_current_user called
2025-12-23 18:09:45,408 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:45,408 - INFO - BEGIN (implicit)
2025-12-23 18:09:45,408 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:45,408 - INFO - [cached since 413.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:45,410 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:45,410 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:09:45,410 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:45,410 - INFO - [cached since 413.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:45,411 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:45,411 - INFO - [cached since 34.58s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:45,413 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:09:45,413 - INFO - ROLLBACK
2025-12-23 18:09:45,414 - INFO - get_current_user called
2025-12-23 18:09:45,414 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:45,414 - INFO - BEGIN (implicit)
2025-12-23 18:09:45,414 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:45,414 - INFO - [cached since 413.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:45,414 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:45,414 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:09:45,415 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:09:45,415 - INFO - [cached since 413.4s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:45,415 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:45,415 - INFO - [cached since 34.59s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:45,415 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:09:45,416 - INFO - ROLLBACK
2025-12-23 18:09:45,444 - INFO - get_current_user called
2025-12-23 18:09:45,444 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:45,444 - INFO - BEGIN (implicit)
2025-12-23 18:09:45,445 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:45,445 - INFO - [cached since 413.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:45,445 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:45,445 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:45,445 - INFO - [cached since 21.22s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:45,446 - INFO - ROLLBACK
2025-12-23 18:09:45,447 - INFO - get_current_user called
2025-12-23 18:09:45,447 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:09:45,447 - INFO - BEGIN (implicit)
2025-12-23 18:09:45,447 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:09:45,447 - INFO - [cached since 413.4s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:09:45,447 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:09:45,448 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:09:45,448 - INFO - [cached since 21.23s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:09:45,448 - INFO - ROLLBACK
2025-12-23 18:11:16,201 - INFO - get_current_user called
2025-12-23 18:11:16,215 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:16,219 - INFO - BEGIN (implicit)
2025-12-23 18:11:16,223 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:16,223 - INFO - [cached since 504.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:16,261 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:16,262 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:11:16,262 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:16,263 - INFO - [cached since 504.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:16,267 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:16,267 - INFO - [cached since 125.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:16,268 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:11:16,268 - INFO - ROLLBACK
2025-12-23 18:11:16,340 - INFO - get_current_user called
2025-12-23 18:11:16,341 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:16,341 - INFO - BEGIN (implicit)
2025-12-23 18:11:16,341 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:16,341 - INFO - [cached since 504.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:16,343 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:16,344 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:16,344 - INFO - [cached since 504.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:16,345 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:16,345 - INFO - [cached since 124.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:16,347 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:16,348 - INFO - [cached since 124.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:16,349 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:11:16,349 - INFO - [cached since 124.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:11:16,352 - INFO - ROLLBACK
2025-12-23 18:11:18,198 - INFO - get_current_user called
2025-12-23 18:11:18,199 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:18,200 - INFO - BEGIN (implicit)
2025-12-23 18:11:18,200 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:18,200 - INFO - [cached since 506.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:18,203 - INFO - get_current_user called
2025-12-23 18:11:18,203 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:18,204 - INFO - BEGIN (implicit)
2025-12-23 18:11:18,204 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:18,204 - INFO - [cached since 506.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:18,205 - INFO - get_current_user called
2025-12-23 18:11:18,205 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:18,208 - INFO - get_current_user called
2025-12-23 18:11:18,208 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:18,211 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:18,211 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:11:18,212 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:18,212 - INFO - [cached since 506.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:18,212 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:18,236 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 18:11:18,236 - INFO - [generated in 0.00014s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 18:11:18,237 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:18,237 - INFO - [cached since 127.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:18,238 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:11:18,238 - INFO - ROLLBACK
2025-12-23 18:11:18,243 - INFO - ROLLBACK
2025-12-23 18:11:18,296 - INFO - BEGIN (implicit)
2025-12-23 18:11:18,296 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:18,296 - INFO - [cached since 506.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:18,296 - INFO - BEGIN (implicit)
2025-12-23 18:11:18,296 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:18,296 - INFO - [cached since 506.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:18,298 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:18,305 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 18:11:18,305 - INFO - [generated in 0.00010s] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 18:11:18,305 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:18,305 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:18,305 - INFO - [cached since 114.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:18,306 - INFO - ROLLBACK
2025-12-23 18:11:18,306 - INFO - ROLLBACK
2025-12-23 18:11:19,346 - INFO - get_current_user called
2025-12-23 18:11:19,346 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:19,347 - INFO - BEGIN (implicit)
2025-12-23 18:11:19,347 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:19,347 - INFO - [cached since 507.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:19,348 - INFO - get_current_user called
2025-12-23 18:11:19,348 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:19,348 - INFO - BEGIN (implicit)
2025-12-23 18:11:19,348 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:19,349 - INFO - [cached since 507.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:19,349 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:19,350 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:19,350 - INFO - [cached since 507.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:19,351 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:19,351 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:11:19,351 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:19,351 - INFO - [cached since 507.3s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:19,353 - INFO - SELECT count(patients.id) AS count_1 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:19,353 - INFO - [cached since 127.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:19,354 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:19,354 - INFO - [cached since 128.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:19,354 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:11:19,355 - INFO - ROLLBACK
2025-12-23 18:11:19,356 - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:19,356 - INFO - [cached since 127.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:19,361 - INFO - SELECT count(appointments.id) AS count_1 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR AND appointments.start_time >= %(start_time_1)s::DATE AND appointments.start_time < %(start_time_2)s::DATE
2025-12-23 18:11:19,361 - INFO - [cached since 127.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'start_time_1': datetime.date(2025, 12, 23), 'start_time_2': datetime.date(2025, 12, 24)}
2025-12-23 18:11:19,363 - INFO - ROLLBACK
2025-12-23 18:11:20,225 - INFO - get_current_user called
2025-12-23 18:11:20,226 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:20,226 - INFO - BEGIN (implicit)
2025-12-23 18:11:20,227 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:20,227 - INFO - [cached since 508.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:20,228 - INFO - get_current_user called
2025-12-23 18:11:20,228 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:20,228 - INFO - BEGIN (implicit)
2025-12-23 18:11:20,228 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:20,228 - INFO - [cached since 508.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:20,229 - INFO - get_current_user called
2025-12-23 18:11:20,229 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:20,229 - INFO - BEGIN (implicit)
2025-12-23 18:11:20,230 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:20,230 - INFO - [cached since 508.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:20,230 - INFO - get_current_user called
2025-12-23 18:11:20,230 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:20,230 - INFO - BEGIN (implicit)
2025-12-23 18:11:20,231 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:20,231 - INFO - [cached since 508.2s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:20,232 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:20,234 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:20,234 - INFO - [cached since 116s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:20,235 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:20,236 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 18:11:20,236 - INFO - [cached since 1.932s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 100, 'param_2': 0}
2025-12-23 18:11:20,237 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:20,237 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:11:20,238 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:20,238 - INFO - [cached since 508.2s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:20,238 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:20,239 - INFO - SELECT appointments.id, appointments.tenant_id, appointments.patient_id, appointments.doctor_id, appointments.start_time, appointments.end_time, appointments.status, appointments.reason 
FROM appointments 
WHERE appointments.tenant_id = %(tenant_id_1)s::VARCHAR ORDER BY appointments.start_time DESC 
 LIMIT %(param_1)s::INTEGER
2025-12-23 18:11:20,239 - INFO - [cached since 2.003s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 200}
2025-12-23 18:11:20,240 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:20,240 - INFO - [cached since 129.4s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:20,240 - INFO - ROLLBACK
2025-12-23 18:11:20,240 - INFO - ROLLBACK
2025-12-23 18:11:20,241 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:11:20,241 - INFO - ROLLBACK
2025-12-23 18:11:20,241 - INFO - ROLLBACK
2025-12-23 18:11:21,024 - INFO - get_current_user called
2025-12-23 18:11:21,024 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:21,025 - INFO - BEGIN (implicit)
2025-12-23 18:11:21,026 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:21,026 - INFO - [cached since 509s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:21,027 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:21,028 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:11:21,028 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:21,028 - INFO - [cached since 509s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:21,029 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:21,029 - INFO - [cached since 130.2s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:21,030 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:11:21,031 - INFO - ROLLBACK
2025-12-23 18:11:21,330 - INFO - get_current_user called
2025-12-23 18:11:21,330 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:21,330 - INFO - BEGIN (implicit)
2025-12-23 18:11:21,331 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:21,331 - INFO - [cached since 509.3s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:21,331 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:21,332 - INFO - SELECT patients.id, patients.tenant_id, patients.mrn, patients.name, patients.dob, patients.gender, patients.mobile, patients.blood_group, patients.allergies, patients.address, patients.created_at 
FROM patients 
WHERE patients.tenant_id = %(tenant_id_1)s::VARCHAR 
 LIMIT %(param_1)s::INTEGER OFFSET %(param_2)s::INTEGER
2025-12-23 18:11:21,332 - INFO - [cached since 3.028s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b', 'param_1': 10, 'param_2': 0}
2025-12-23 18:11:21,333 - INFO - ROLLBACK
2025-12-23 18:11:22,882 - INFO - get_current_user called
2025-12-23 18:11:22,883 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:22,884 - INFO - BEGIN (implicit)
2025-12-23 18:11:22,885 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:22,885 - INFO - [cached since 510.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:22,887 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:22,887 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:11:22,887 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:22,887 - INFO - [cached since 510.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:22,888 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:22,888 - INFO - [cached since 132.1s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:22,889 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:11:22,890 - INFO - ROLLBACK
2025-12-23 18:11:23,712 - INFO - get_current_user called
2025-12-23 18:11:23,725 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:23,747 - INFO - BEGIN (implicit)
2025-12-23 18:11:23,754 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:23,754 - INFO - [cached since 511.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:23,755 - INFO - get_current_user called
2025-12-23 18:11:23,756 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:23,756 - INFO - BEGIN (implicit)
2025-12-23 18:11:23,757 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:23,757 - INFO - [cached since 511.7s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:23,759 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:23,759 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:11:23,759 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:23,759 - INFO - [cached since 511.7s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:23,759 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:23,759 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:23,759 - INFO - [cached since 119.5s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:23,760 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:23,760 - INFO - [cached since 132.9s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:23,761 - INFO - ROLLBACK
2025-12-23 18:11:23,761 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:11:23,761 - INFO - ROLLBACK
2025-12-23 18:11:26,805 - INFO - get_current_user called
2025-12-23 18:11:26,806 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:26,809 - INFO - BEGIN (implicit)
2025-12-23 18:11:26,811 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:26,811 - INFO - [cached since 514.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:26,835 - INFO - get_current_user called
2025-12-23 18:11:26,836 - INFO - get_current_user: token decoded, user=apollo_admin
2025-12-23 18:11:26,837 - INFO - BEGIN (implicit)
2025-12-23 18:11:26,837 - INFO - SELECT users.id, users.tenant_id, users.username, users.hashed_password, users.roles, users.is_active, users.created_at 
FROM users 
WHERE users.username = %(username_1)s::VARCHAR
2025-12-23 18:11:26,837 - INFO - [cached since 514.8s ago] {'username_1': 'apollo_admin'}
2025-12-23 18:11:26,840 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:26,841 - INFO - Endpoint /users/me hit for apollo_admin
2025-12-23 18:11:26,841 - INFO - SELECT tenants.id AS tenants_id, tenants.name AS tenants_name, tenants.domain AS tenants_domain, tenants.created_at AS tenants_created_at, tenants.is_super_admin AS tenants_is_super_admin 
FROM tenants 
WHERE tenants.id = %(pk_1)s::VARCHAR
2025-12-23 18:11:26,841 - INFO - [cached since 514.8s ago] {'pk_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:26,841 - INFO - get_current_user: db fetch done, found=True
2025-12-23 18:11:26,841 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:26,842 - INFO - [cached since 136s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:26,852 - INFO - ROLLBACK
2025-12-23 18:11:26,855 - INFO - SELECT tenant_settings.id, tenant_settings.tenant_id, tenant_settings.clinic_name, tenant_settings.logo_url, tenant_settings.address, tenant_settings.phone, tenant_settings.website 
FROM tenant_settings 
WHERE tenant_settings.tenant_id = %(tenant_id_1)s::VARCHAR
2025-12-23 18:11:26,855 - INFO - [cached since 136s ago] {'tenant_id_1': '28f9a367-8132-4723-a360-333fbc5db17b'}
2025-12-23 18:11:26,856 - INFO - Tenant fetched: Apollo Hospital
2025-12-23 18:11:26,856 - INFO - ROLLBACK
